(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
// Generated by CoffeeScript 1.7.1
var AngryCat, AngryCatView, AngryCats, AngryCatsView, MyApp,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

MyApp = new Backbone.Marionette.Application();

MyApp.addRegions({
  mainRegion: "#content"
});

AngryCat = (function(_super) {
  __extends(AngryCat, _super);

  function AngryCat() {
    return AngryCat.__super__.constructor.apply(this, arguments);
  }

  AngryCat.prototype.defaults = {
    votes: 0
  };

  AngryCat.prototype.addVote = function() {
    return this.set("votes", this.get("votes") + 1);
  };

  AngryCat.prototype.rankUp = function() {
    return this.set({
      rank: this.get("rank") - 1
    });
  };

  AngryCat.prototype.rankDown = function() {
    return this.set({
      rank: this.get("rank") + 1
    });
  };

  return AngryCat;

})(Backbone.Model);

AngryCats = (function(_super) {
  __extends(AngryCats, _super);

  function AngryCats() {
    return AngryCats.__super__.constructor.apply(this, arguments);
  }

  AngryCats.prototype.model = AngryCat;

  AngryCats.prototype.initialize = function(cats) {
    var cat, rank, _i, _len;
    rank = 1;
    for (_i = 0, _len = cats.length; _i < _len; _i++) {
      cat = cats[_i];
      cat.set("rank", rank++);
    }
    this.on("add", function(cat) {
      var error;
      if (!cat.get("rank")) {
        error = Error("Cat must have a rank defined before being added to the collection");
        error.name = "NoRankError";
        throw error;
      }
    });
    MyApp.on("rank:up", (function(_this) {
      return function(cat) {
        if (cat.get("rank") === 1) {
          return true;
        }
        _this.rankUp(cat);
        _this.sort();
        return _this.trigger("reset");
      };
    })(this));
    MyApp.on("rank:down", (function(_this) {
      return function(cat) {
        if (cat.get("rank") === _this.size()) {
          return true;
        }
        _this.rankDown(cat);
        _this.sort();
        return _this.trigger("reset");
      };
    })(this));
    return MyApp.on("cat:disqualify", (function(_this) {
      return function(cat) {
        var catsToUprank, disqualifiedRank;
        disqualifiedRank = cat.get("rank");
        catsToUprank = _this.filter(function(cat) {
          return cat.get("rank") > disqualifiedRank;
        });
        catsToUprank.forEach(function(cat) {
          return cat.rankUp();
        });
        return _this.trigger("reset");
      };
    })(this));
  };

  AngryCats.prototype.comparator = function(cat) {
    return cat.get("rank");
  };

  AngryCats.prototype.rankUp = function(cat) {
    var otherCat, rankToSwap;
    rankToSwap = cat.get("rank") - 1;
    otherCat = this.at(rankToSwap - 1);
    cat.rankUp();
    return otherCat.rankDown();
  };

  AngryCats.prototype.rankDown = function(cat) {
    var otherCat, rankToSwap;
    rankToSwap = cat.get("rank") + 1;
    otherCat = this.at(rankToSwap - 1);
    cat.rankDown();
    return otherCat.rankUp();
  };

  return AngryCats;

})(Backbone.Collection);

AngryCatView = (function(_super) {
  __extends(AngryCatView, _super);

  function AngryCatView() {
    return AngryCatView.__super__.constructor.apply(this, arguments);
  }

  AngryCatView.prototype.template = "#angry_cat-template";

  AngryCatView.prototype.tagName = "tr";

  AngryCatView.prototype.className = "angry_cat";

  AngryCatView.prototype.events = {
    "click .rank_up img": "rankUp",
    "click .rank_down img": "rankDown",
    "click a.disqualify": "disqualify"
  };

  AngryCatView.prototype.initialize = function() {
    return this.listenTo(this.model, "change:votes", this.render);
  };

  AngryCatView.prototype.rankUp = function() {
    this.model.addVote();
    return MyApp.trigger("rank:up", this.model);
  };

  AngryCatView.prototype.rankDown = function() {
    this.model.addVote();
    return MyApp.trigger("rank:down", this.model);
  };

  AngryCatView.prototype.disqualify = function() {
    MyApp.trigger("cat:disqualify", this.model);
    return this.model.destroy();
  };

  return AngryCatView;

})(Backbone.Marionette.ItemView);

AngryCatsView = (function(_super) {
  __extends(AngryCatsView, _super);

  function AngryCatsView() {
    return AngryCatsView.__super__.constructor.apply(this, arguments);
  }

  AngryCatsView.prototype.tagName = "table";

  AngryCatsView.prototype.id = "angry_cats";

  AngryCatsView.prototype.className = "table-striped table-bordered";

  AngryCatsView.prototype.template = "#angry_cats-template";

  AngryCatsView.prototype.itemView = AngryCatView;

  AngryCatsView.prototype.initialize = function() {
    return this.listenTo(this.collection, "sort", this.renderCollection);
  };

  AngryCatsView.prototype.appendHtml = function(collectionView, itemView) {
    return collectionView.$("tbody").append(itemView.el);
  };

  return AngryCatsView;

})(Backbone.Marionette.CompositeView);

MyApp.addInitializer(function(options) {
  var angryCatsView;
  angryCatsView = new AngryCatsView({
    collection: options.cats
  });
  return MyApp.mainRegion.show(angryCatsView);
});

$(function() {
  var cats;
  cats = new AngryCats([
    new AngryCat({
      name: "Wet Cat",
      image_path: "images/cat2.jpg"
    }), new AngryCat({
      name: "Bitey Cat",
      image_path: "images/cat1.jpg"
    }), new AngryCat({
      name: "Surprised Cat",
      image_path: "images/cat3.jpg"
    }), new AngryCat({
      name: "Cranky Cat",
      image_path: "images/cat4.jpg"
    })
  ]);
  return MyApp.start({
    cats: cats
  });
});

},{}]},{},[1])
//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlcyI6WyIvaG9tZS9icnVjZS9HaXQvYmFja2JvbmUubWFyaW9uZXR0ZS1jb2xsZWN0aW9uLWV4YW1wbGUvdG1wL2FwcC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuNy4xXG52YXIgQW5ncnlDYXQsIEFuZ3J5Q2F0VmlldywgQW5ncnlDYXRzLCBBbmdyeUNhdHNWaWV3LCBNeUFwcCxcbiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksXG4gIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9O1xuXG5NeUFwcCA9IG5ldyBCYWNrYm9uZS5NYXJpb25ldHRlLkFwcGxpY2F0aW9uKCk7XG5cbk15QXBwLmFkZFJlZ2lvbnMoe1xuICBtYWluUmVnaW9uOiBcIiNjb250ZW50XCJcbn0pO1xuXG5BbmdyeUNhdCA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgX19leHRlbmRzKEFuZ3J5Q2F0LCBfc3VwZXIpO1xuXG4gIGZ1bmN0aW9uIEFuZ3J5Q2F0KCkge1xuICAgIHJldHVybiBBbmdyeUNhdC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIEFuZ3J5Q2F0LnByb3RvdHlwZS5kZWZhdWx0cyA9IHtcbiAgICB2b3RlczogMFxuICB9O1xuXG4gIEFuZ3J5Q2F0LnByb3RvdHlwZS5hZGRWb3RlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuc2V0KFwidm90ZXNcIiwgdGhpcy5nZXQoXCJ2b3Rlc1wiKSArIDEpO1xuICB9O1xuXG4gIEFuZ3J5Q2F0LnByb3RvdHlwZS5yYW5rVXAgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5zZXQoe1xuICAgICAgcmFuazogdGhpcy5nZXQoXCJyYW5rXCIpIC0gMVxuICAgIH0pO1xuICB9O1xuXG4gIEFuZ3J5Q2F0LnByb3RvdHlwZS5yYW5rRG93biA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnNldCh7XG4gICAgICByYW5rOiB0aGlzLmdldChcInJhbmtcIikgKyAxXG4gICAgfSk7XG4gIH07XG5cbiAgcmV0dXJuIEFuZ3J5Q2F0O1xuXG59KShCYWNrYm9uZS5Nb2RlbCk7XG5cbkFuZ3J5Q2F0cyA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgX19leHRlbmRzKEFuZ3J5Q2F0cywgX3N1cGVyKTtcblxuICBmdW5jdGlvbiBBbmdyeUNhdHMoKSB7XG4gICAgcmV0dXJuIEFuZ3J5Q2F0cy5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIEFuZ3J5Q2F0cy5wcm90b3R5cGUubW9kZWwgPSBBbmdyeUNhdDtcblxuICBBbmdyeUNhdHMucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbihjYXRzKSB7XG4gICAgdmFyIGNhdCwgcmFuaywgX2ksIF9sZW47XG4gICAgcmFuayA9IDE7XG4gICAgZm9yIChfaSA9IDAsIF9sZW4gPSBjYXRzLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICBjYXQgPSBjYXRzW19pXTtcbiAgICAgIGNhdC5zZXQoXCJyYW5rXCIsIHJhbmsrKyk7XG4gICAgfVxuICAgIHRoaXMub24oXCJhZGRcIiwgZnVuY3Rpb24oY2F0KSB7XG4gICAgICB2YXIgZXJyb3I7XG4gICAgICBpZiAoIWNhdC5nZXQoXCJyYW5rXCIpKSB7XG4gICAgICAgIGVycm9yID0gRXJyb3IoXCJDYXQgbXVzdCBoYXZlIGEgcmFuayBkZWZpbmVkIGJlZm9yZSBiZWluZyBhZGRlZCB0byB0aGUgY29sbGVjdGlvblwiKTtcbiAgICAgICAgZXJyb3IubmFtZSA9IFwiTm9SYW5rRXJyb3JcIjtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9XG4gICAgfSk7XG4gICAgTXlBcHAub24oXCJyYW5rOnVwXCIsIChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKGNhdCkge1xuICAgICAgICBpZiAoY2F0LmdldChcInJhbmtcIikgPT09IDEpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBfdGhpcy5yYW5rVXAoY2F0KTtcbiAgICAgICAgX3RoaXMuc29ydCgpO1xuICAgICAgICByZXR1cm4gX3RoaXMudHJpZ2dlcihcInJlc2V0XCIpO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKSk7XG4gICAgTXlBcHAub24oXCJyYW5rOmRvd25cIiwgKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oY2F0KSB7XG4gICAgICAgIGlmIChjYXQuZ2V0KFwicmFua1wiKSA9PT0gX3RoaXMuc2l6ZSgpKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMucmFua0Rvd24oY2F0KTtcbiAgICAgICAgX3RoaXMuc29ydCgpO1xuICAgICAgICByZXR1cm4gX3RoaXMudHJpZ2dlcihcInJlc2V0XCIpO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKSk7XG4gICAgcmV0dXJuIE15QXBwLm9uKFwiY2F0OmRpc3F1YWxpZnlcIiwgKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oY2F0KSB7XG4gICAgICAgIHZhciBjYXRzVG9VcHJhbmssIGRpc3F1YWxpZmllZFJhbms7XG4gICAgICAgIGRpc3F1YWxpZmllZFJhbmsgPSBjYXQuZ2V0KFwicmFua1wiKTtcbiAgICAgICAgY2F0c1RvVXByYW5rID0gX3RoaXMuZmlsdGVyKGZ1bmN0aW9uKGNhdCkge1xuICAgICAgICAgIHJldHVybiBjYXQuZ2V0KFwicmFua1wiKSA+IGRpc3F1YWxpZmllZFJhbms7XG4gICAgICAgIH0pO1xuICAgICAgICBjYXRzVG9VcHJhbmsuZm9yRWFjaChmdW5jdGlvbihjYXQpIHtcbiAgICAgICAgICByZXR1cm4gY2F0LnJhbmtVcCgpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIF90aGlzLnRyaWdnZXIoXCJyZXNldFwiKTtcbiAgICAgIH07XG4gICAgfSkodGhpcykpO1xuICB9O1xuXG4gIEFuZ3J5Q2F0cy5wcm90b3R5cGUuY29tcGFyYXRvciA9IGZ1bmN0aW9uKGNhdCkge1xuICAgIHJldHVybiBjYXQuZ2V0KFwicmFua1wiKTtcbiAgfTtcblxuICBBbmdyeUNhdHMucHJvdG90eXBlLnJhbmtVcCA9IGZ1bmN0aW9uKGNhdCkge1xuICAgIHZhciBvdGhlckNhdCwgcmFua1RvU3dhcDtcbiAgICByYW5rVG9Td2FwID0gY2F0LmdldChcInJhbmtcIikgLSAxO1xuICAgIG90aGVyQ2F0ID0gdGhpcy5hdChyYW5rVG9Td2FwIC0gMSk7XG4gICAgY2F0LnJhbmtVcCgpO1xuICAgIHJldHVybiBvdGhlckNhdC5yYW5rRG93bigpO1xuICB9O1xuXG4gIEFuZ3J5Q2F0cy5wcm90b3R5cGUucmFua0Rvd24gPSBmdW5jdGlvbihjYXQpIHtcbiAgICB2YXIgb3RoZXJDYXQsIHJhbmtUb1N3YXA7XG4gICAgcmFua1RvU3dhcCA9IGNhdC5nZXQoXCJyYW5rXCIpICsgMTtcbiAgICBvdGhlckNhdCA9IHRoaXMuYXQocmFua1RvU3dhcCAtIDEpO1xuICAgIGNhdC5yYW5rRG93bigpO1xuICAgIHJldHVybiBvdGhlckNhdC5yYW5rVXAoKTtcbiAgfTtcblxuICByZXR1cm4gQW5ncnlDYXRzO1xuXG59KShCYWNrYm9uZS5Db2xsZWN0aW9uKTtcblxuQW5ncnlDYXRWaWV3ID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICBfX2V4dGVuZHMoQW5ncnlDYXRWaWV3LCBfc3VwZXIpO1xuXG4gIGZ1bmN0aW9uIEFuZ3J5Q2F0VmlldygpIHtcbiAgICByZXR1cm4gQW5ncnlDYXRWaWV3Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgQW5ncnlDYXRWaWV3LnByb3RvdHlwZS50ZW1wbGF0ZSA9IFwiI2FuZ3J5X2NhdC10ZW1wbGF0ZVwiO1xuXG4gIEFuZ3J5Q2F0Vmlldy5wcm90b3R5cGUudGFnTmFtZSA9IFwidHJcIjtcblxuICBBbmdyeUNhdFZpZXcucHJvdG90eXBlLmNsYXNzTmFtZSA9IFwiYW5ncnlfY2F0XCI7XG5cbiAgQW5ncnlDYXRWaWV3LnByb3RvdHlwZS5ldmVudHMgPSB7XG4gICAgXCJjbGljayAucmFua191cCBpbWdcIjogXCJyYW5rVXBcIixcbiAgICBcImNsaWNrIC5yYW5rX2Rvd24gaW1nXCI6IFwicmFua0Rvd25cIixcbiAgICBcImNsaWNrIGEuZGlzcXVhbGlmeVwiOiBcImRpc3F1YWxpZnlcIlxuICB9O1xuXG4gIEFuZ3J5Q2F0Vmlldy5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmxpc3RlblRvKHRoaXMubW9kZWwsIFwiY2hhbmdlOnZvdGVzXCIsIHRoaXMucmVuZGVyKTtcbiAgfTtcblxuICBBbmdyeUNhdFZpZXcucHJvdG90eXBlLnJhbmtVcCA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMubW9kZWwuYWRkVm90ZSgpO1xuICAgIHJldHVybiBNeUFwcC50cmlnZ2VyKFwicmFuazp1cFwiLCB0aGlzLm1vZGVsKTtcbiAgfTtcblxuICBBbmdyeUNhdFZpZXcucHJvdG90eXBlLnJhbmtEb3duID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5tb2RlbC5hZGRWb3RlKCk7XG4gICAgcmV0dXJuIE15QXBwLnRyaWdnZXIoXCJyYW5rOmRvd25cIiwgdGhpcy5tb2RlbCk7XG4gIH07XG5cbiAgQW5ncnlDYXRWaWV3LnByb3RvdHlwZS5kaXNxdWFsaWZ5ID0gZnVuY3Rpb24oKSB7XG4gICAgTXlBcHAudHJpZ2dlcihcImNhdDpkaXNxdWFsaWZ5XCIsIHRoaXMubW9kZWwpO1xuICAgIHJldHVybiB0aGlzLm1vZGVsLmRlc3Ryb3koKTtcbiAgfTtcblxuICByZXR1cm4gQW5ncnlDYXRWaWV3O1xuXG59KShCYWNrYm9uZS5NYXJpb25ldHRlLkl0ZW1WaWV3KTtcblxuQW5ncnlDYXRzVmlldyA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgX19leHRlbmRzKEFuZ3J5Q2F0c1ZpZXcsIF9zdXBlcik7XG5cbiAgZnVuY3Rpb24gQW5ncnlDYXRzVmlldygpIHtcbiAgICByZXR1cm4gQW5ncnlDYXRzVmlldy5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIEFuZ3J5Q2F0c1ZpZXcucHJvdG90eXBlLnRhZ05hbWUgPSBcInRhYmxlXCI7XG5cbiAgQW5ncnlDYXRzVmlldy5wcm90b3R5cGUuaWQgPSBcImFuZ3J5X2NhdHNcIjtcblxuICBBbmdyeUNhdHNWaWV3LnByb3RvdHlwZS5jbGFzc05hbWUgPSBcInRhYmxlLXN0cmlwZWQgdGFibGUtYm9yZGVyZWRcIjtcblxuICBBbmdyeUNhdHNWaWV3LnByb3RvdHlwZS50ZW1wbGF0ZSA9IFwiI2FuZ3J5X2NhdHMtdGVtcGxhdGVcIjtcblxuICBBbmdyeUNhdHNWaWV3LnByb3RvdHlwZS5pdGVtVmlldyA9IEFuZ3J5Q2F0VmlldztcblxuICBBbmdyeUNhdHNWaWV3LnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubGlzdGVuVG8odGhpcy5jb2xsZWN0aW9uLCBcInNvcnRcIiwgdGhpcy5yZW5kZXJDb2xsZWN0aW9uKTtcbiAgfTtcblxuICBBbmdyeUNhdHNWaWV3LnByb3RvdHlwZS5hcHBlbmRIdG1sID0gZnVuY3Rpb24oY29sbGVjdGlvblZpZXcsIGl0ZW1WaWV3KSB7XG4gICAgcmV0dXJuIGNvbGxlY3Rpb25WaWV3LiQoXCJ0Ym9keVwiKS5hcHBlbmQoaXRlbVZpZXcuZWwpO1xuICB9O1xuXG4gIHJldHVybiBBbmdyeUNhdHNWaWV3O1xuXG59KShCYWNrYm9uZS5NYXJpb25ldHRlLkNvbXBvc2l0ZVZpZXcpO1xuXG5NeUFwcC5hZGRJbml0aWFsaXplcihmdW5jdGlvbihvcHRpb25zKSB7XG4gIHZhciBhbmdyeUNhdHNWaWV3O1xuICBhbmdyeUNhdHNWaWV3ID0gbmV3IEFuZ3J5Q2F0c1ZpZXcoe1xuICAgIGNvbGxlY3Rpb246IG9wdGlvbnMuY2F0c1xuICB9KTtcbiAgcmV0dXJuIE15QXBwLm1haW5SZWdpb24uc2hvdyhhbmdyeUNhdHNWaWV3KTtcbn0pO1xuXG4kKGZ1bmN0aW9uKCkge1xuICB2YXIgY2F0cztcbiAgY2F0cyA9IG5ldyBBbmdyeUNhdHMoW1xuICAgIG5ldyBBbmdyeUNhdCh7XG4gICAgICBuYW1lOiBcIldldCBDYXRcIixcbiAgICAgIGltYWdlX3BhdGg6IFwiaW1hZ2VzL2NhdDIuanBnXCJcbiAgICB9KSwgbmV3IEFuZ3J5Q2F0KHtcbiAgICAgIG5hbWU6IFwiQml0ZXkgQ2F0XCIsXG4gICAgICBpbWFnZV9wYXRoOiBcImltYWdlcy9jYXQxLmpwZ1wiXG4gICAgfSksIG5ldyBBbmdyeUNhdCh7XG4gICAgICBuYW1lOiBcIlN1cnByaXNlZCBDYXRcIixcbiAgICAgIGltYWdlX3BhdGg6IFwiaW1hZ2VzL2NhdDMuanBnXCJcbiAgICB9KSwgbmV3IEFuZ3J5Q2F0KHtcbiAgICAgIG5hbWU6IFwiQ3Jhbmt5IENhdFwiLFxuICAgICAgaW1hZ2VfcGF0aDogXCJpbWFnZXMvY2F0NC5qcGdcIlxuICAgIH0pXG4gIF0pO1xuICByZXR1cm4gTXlBcHAuc3RhcnQoe1xuICAgIGNhdHM6IGNhdHNcbiAgfSk7XG59KTtcbiJdfQ==
