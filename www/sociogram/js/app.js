(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
// Generated by CoffeeScript 1.7.1
var app;

module.exports = app = (function() {
  function app() {}

  return app;

})();

app.models = (function() {
  function models() {}

  return models;

})();

app.views = (function() {
  function views() {}

  return views;

})();

app.controllers = (function() {
  function controllers() {}

  return controllers;

})();

app.lib = (function() {
  function lib() {}

  return lib;

})();

require('./lib/TemplateLoader');

require('./lib/DOMFileSystem');

require('./controllers/Application');

require('./controllers/Router');

require('./models/Person');

require('./models/PersonCollection');

require('./views/Error');

require('./views/Feed');

require('./views/Friends');

require('./views/Login');

require('./views/Person');

require('./views/Post');

require('./views/PostUI');

require('./views/Revoke');

require('./views/Shell');

require('./views/Welcome');

},{"./controllers/Application":2,"./controllers/Router":3,"./lib/DOMFileSystem":6,"./lib/TemplateLoader":7,"./models/Person":8,"./models/PersonCollection":9,"./views/Error":10,"./views/Feed":11,"./views/Friends":12,"./views/Login":13,"./views/Person":14,"./views/Post":15,"./views/PostUI":16,"./views/Revoke":17,"./views/Shell":18,"./views/Welcome":19}],2:[function(require,module,exports){
// Generated by CoffeeScript 1.7.1
var app;

app = require('../app');

app.controllers.Application = (function() {
  function Application() {
    this.user = null;
    this.shell = null;
    this.router = null;
    this.models = {};
    this.views = {};
    this.templateLoader = new app.lib.TemplateLoader();
  }

  return Application;

})();

},{"../app":1}],3:[function(require,module,exports){
// Generated by CoffeeScript 1.7.1
var app, fb,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

app = require('../app');

fb = require('../fb');

app.controllers.Router = (function(_super) {
  __extends(Router, _super);

  function Router() {
    return Router.__super__.constructor.apply(this, arguments);
  }

  Router.prototype.routes = {
    "": "welcome",
    me: "me",
    "me/friends": "myfriends",
    "person/:id": "person",
    "person/:id/friends": "friends",
    "person/:id/mutualfriends": "mutualfriends",
    "person/:id/feed": "feed",
    revoke: "revoke",
    post: "post",
    postui: "postui"
  };

  Router.prototype.initialize = function() {
    return this.welcomeView = new app.views.Welcome({
      model: fb.user
    });
  };

  Router.prototype.welcome = function() {
    return $("#content").html(this.welcomeView.el);
  };

  Router.prototype.me = function() {
    return this.person("me");
  };

  Router.prototype.myfriends = function() {
    return this.friends("me");
  };

  Router.prototype.person = function(id) {
    var e;
    $("#content").html("<div class=\"breadcrumb api\">FB.api(\"/" + id + "\");</div>");
    try {
      return FB.api("/" + id, (function(_this) {
        return function(response) {
          if (response.error) {
            return _this.showErrorPage();
          } else {
            return $("#content").append(new app.views.Person({
              model: new app.models.Person(response)
            }).el);
          }
        };
      })(this));
    } catch (_error) {
      e = _error;
      return this.showErrorPage();
    }
  };

  Router.prototype.friends = function(id) {
    var e;
    $("#content").html("<div class=\"breadcrumb api\">FB.api(\"/" + id + "/friends\");</div>");
    try {
      return FB.api("/" + id + "/friends?limit=20", (function(_this) {
        return function(response) {
          if (response.error) {
            return _this.showErrorPage();
          } else {
            return $("#content").append(new app.views.Friends({
              model: new Backbone.Model(response)
            }).el);
          }
        };
      })(this));
    } catch (_error) {
      e = _error;
      return this.showErrorPage();
    }
  };

  Router.prototype.mutualfriends = function(id) {
    var e;
    $("#content").html("<div class=\"breadcrumb api\">FB.api(\"/" + id + "/mutualfriends\");</div>");
    try {
      return FB.api("/" + id + "/mutualfriends?limit=20", (function(_this) {
        return function(response) {
          if (response.error) {
            return _this.showErrorPage();
          } else {
            return $("#content").append(new app.views.Friends({
              model: new Backbone.Model(response)
            }).el);
          }
        };
      })(this));
    } catch (_error) {
      e = _error;
      return this.showErrorPage();
    }
  };

  Router.prototype.feed = function(id) {
    var e;
    $("#content").html("<div class=\"breadcrumb api\">FB.api(\"/" + id + "/feed\");</div>");
    try {
      return FB.api("/" + id + "/feed?limit=20", (function(_this) {
        return function(response) {
          if (response.error) {
            return _this.showErrorPage();
          } else {
            return $("#content").append(new app.views.Feed({
              model: new Backbone.Model(response)
            }).el);
          }
        };
      })(this));
    } catch (_error) {
      e = _error;
      return this.showErrorPage();
    }
  };

  Router.prototype.post = function() {
    $("#content").html("<div class=\"breadcrumb api\">FB.api(\"/me/feed\", \"post\", data);</div>");
    return $("#content").append(new app.views.Post().el);
  };

  Router.prototype.postui = function() {
    $("#content").html("<div class=\"breadcrumb api\">FB.ui();</div>");
    return $("#content").append(new app.views.PostUI().el);
  };

  Router.prototype.revoke = function() {
    $("#content").html("<div class=\"breadcrumb api\">FB.api(\"/me/permissions\", \"delete\");</div>");
    return $("#content").append(new app.views.Revoke().el);
  };

  Router.prototype.showErrorPage = function() {
    return $("#content").append(new app.views.Error().el);
  };

  return Router;

})(Backbone.Router);

},{"../app":1,"../fb":4}],4:[function(require,module,exports){
// Generated by CoffeeScript 1.7.1
var app, fb;

app = require('./app');

fb = new app.controllers.Application;

module.exports = fb;

},{"./app":1}],5:[function(require,module,exports){
// Generated by CoffeeScript 1.7.1
var app, fb;

app = require('./app');

fb = require('./fb');

(function(d) {
  var id, js, ref;
  id = "facebook-jssdk";
  ref = d.getElementsByTagName("script")[0];
  if (d.getElementById(id)) {
    return;
  }
  js = d.createElement("script");
  js.id = id;
  js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js";
  return ref.parentNode.insertBefore(js, ref);
})(document);

window.fbAsyncInit = function() {
  FB.Event.subscribe("auth.statusChange", function(response) {
    return $(document).trigger("fbStatusChange", response);
  });
  return FB.init({
    appId: "1478930342328388",
    channelUrl: "//localhost/channel.html",
    status: true,
    cookie: true,
    xfbml: true
  });
};

$(document).on("ready", function() {
  fb.user = new app.models.Person();
  return fb.templateLoader.load(["Shell", "Welcome", "Login", "Person", "Friends", "Feed", "Post", "PostUI", "Error", "Revoke"], function() {
    fb.shell = new app.views.Shell({
      el: "#shell",
      model: fb.user
    });
    fb.router = new app.controllers.Router();
    return Backbone.history.start();
  });
});

$(document).on("fbStatusChange", function(event, data) {
  if (data.status === "connected") {
    return FB.api("/me", function(response) {
      return fb.user.set(response);
    });
  } else {
    return fb.user.set(fb.user.defaults);
  }
});

$(document).on("logout", function() {
  FB.logout();
  return false;
});

$(document).on("login", function() {
  FB.login((function() {}), {
    scope: "publish_actions"
  });
  return false;
});

},{"./app":1,"./fb":4}],6:[function(require,module,exports){
// Generated by CoffeeScript 1.7.1
var app;

app = require('../app');

app.lib.DOMFileSystem = (function() {
  function DOMFileSystem() {}

  DOMFileSystem.prototype.readTemplateFile = function($template) {
    var el;
    if ((el = $('#' + $template)) != null) {
      return el.text();
    } else {
      throw Liquid.FileSystemError("Template not found: " + $template);
    }
  };

  return DOMFileSystem;

})();

Liquid.Template.fileSystem = new app.lib.DOMFileSystem;

},{"../app":1}],7:[function(require,module,exports){
// Generated by CoffeeScript 1.7.1
var app;

app = require('../app');

app.lib.TemplateLoader = (function() {
  function TemplateLoader() {
    this.templates = {};
  }

  TemplateLoader.prototype.load = function(names, callback) {
    var deferreds;
    deferreds = [];
    $.each(names, (function(_this) {
      return function(index, name) {
        if (app.views[name]) {
          return deferreds.push($.get("tpl/" + name.toLowerCase() + ".liquid", function(template) {
            return _this.templates[name] = Liquid.Template.parse(template);
          }));
        } else {
          return alert(name + " not found");
        }
      };
    })(this));
    return $.when.apply(null, deferreds).done(callback);
  };

  TemplateLoader.prototype.get = function(name) {
    return this.templates[name];
  };

  return TemplateLoader;

})();

},{"../app":1}],8:[function(require,module,exports){
// Generated by CoffeeScript 1.7.1
var app,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

app = require('../app');

app.models.Person = (function(_super) {
  __extends(Person, _super);

  function Person() {
    return Person.__super__.constructor.apply(this, arguments);
  }

  Person.prototype.defaults = {
    id: "",
    name: "",
    first_name: "",
    last_name: "",
    gender: "",
    username: "",
    link: "",
    locale: "",
    timezone: ""
  };

  return Person;

})(Backbone.Model);

},{"../app":1}],9:[function(require,module,exports){
// Generated by CoffeeScript 1.7.1
var app,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

app = require('../app');

app.models.PersonCollection = (function(_super) {
  __extends(PersonCollection, _super);

  function PersonCollection() {
    return PersonCollection.__super__.constructor.apply(this, arguments);
  }

  PersonCollection.prototype.model = app.models.Person;

  return PersonCollection;

})(Backbone.Collection);

},{"../app":1}],10:[function(require,module,exports){
// Generated by CoffeeScript 1.7.1
var app, fb,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

app = require('../app');

fb = require('../fb');

app.views.Error = (function(_super) {
  __extends(Error, _super);

  function Error() {
    return Error.__super__.constructor.apply(this, arguments);
  }

  Error.prototype.initialize = function() {
    this.template = fb.templateLoader.get("Error");
    return this.render();
  };

  Error.prototype.render = function() {
    this.$el.html(this.template.render());
    return this;
  };

  Error.prototype.events = {
    "click .retry": "retry"
  };

  Error.prototype.retry = function() {
    return Backbone.history.loadUrl(Backbone.history.fragment);
  };

  return Error;

})(Backbone.View);

},{"../app":1,"../fb":4}],11:[function(require,module,exports){
// Generated by CoffeeScript 1.7.1
var app,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

app = require('../app');

app.views.Feed = (function(_super) {
  __extends(Feed, _super);

  function Feed() {
    return Feed.__super__.constructor.apply(this, arguments);
  }

  Feed.prototype.initialize = function() {
    this.template = fb.templateLoader.get("Feed");
    this.model.on("change", this.render, this);
    return this.render();
  };

  Feed.prototype.render = function() {
    this.$el.html(this.template.render(this.model.toJSON()));
    return this;
  };

  Feed.prototype.events = {
    "click .next": "next",
    "click .previous": "previous"
  };

  Feed.prototype.next = function() {
    this.fetch(this.model.get("paging").next);
    return false;
  };

  Feed.prototype.previous = function() {
    this.fetch(this.model.get("paging").previous);
    return false;
  };

  Feed.prototype.fetch = function(url) {
    var self;
    self = this;
    return $.ajax({
      url: url,
      dataType: "json"
    }).done(function(response) {
      return self.model.set(response);
    }).fail(function(e) {
      return alert("Error fetching data");
    });
  };

  return Feed;

})(Backbone.View);

},{"../app":1}],12:[function(require,module,exports){
// Generated by CoffeeScript 1.7.1
var app, fb,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

app = require('../app');

fb = require('../fb');

app.views.Friends = (function(_super) {
  __extends(Friends, _super);

  function Friends() {
    return Friends.__super__.constructor.apply(this, arguments);
  }

  Friends.prototype.initialize = function() {
    this.template = fb.templateLoader.get("Friends");
    this.model.on("change", this.render, this);
    return this.render();
  };

  Friends.prototype.render = function() {
    this.$el.html(this.template.render(this.model.toJSON()));
    return this;
  };

  Friends.prototype.events = {
    "click .next": "next",
    "click .previous": "previous"
  };

  Friends.prototype.next = function() {
    this.fetch(this.model.get("paging").next);
    return false;
  };

  Friends.prototype.previous = function() {
    this.fetch(this.model.get("paging").previous);
    return false;
  };

  Friends.prototype.fetch = function(url) {
    var self;
    self = this;
    return $.ajax({
      url: url,
      dataType: "json"
    }).done(function(response) {
      return self.model.set(response);
    }).fail(function(e) {
      return alert("Error fetching data");
    });
  };

  return Friends;

})(Backbone.View);

},{"../app":1,"../fb":4}],13:[function(require,module,exports){
// Generated by CoffeeScript 1.7.1
var app, fb,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

app = require('../app');

fb = require('../fb');

app.views.Login = (function(_super) {
  __extends(Login, _super);

  function Login() {
    return Login.__super__.constructor.apply(this, arguments);
  }

  Login.prototype.initialize = function() {
    this.template = fb.templateLoader.get("Login");
    this.model.on("change", this.render, this);
    return this.render();
  };

  Login.prototype.render = function() {
    this.$el.html(this.template.render(this.model.toJSON()));
    return this;
  };

  Login.prototype.events = {
    "click .login": "login",
    "click .logout": "logout"
  };

  Login.prototype.login = function(e) {
    $(document).trigger("login");
    return false;
  };

  Login.prototype.logout = function(e) {
    $(document).trigger("logout");
    return false;
  };

  return Login;

})(Backbone.View);

},{"../app":1,"../fb":4}],14:[function(require,module,exports){
// Generated by CoffeeScript 1.7.1
var app, fb,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

app = require('../app');

fb = require('../fb');

app.views.Person = (function(_super) {
  __extends(Person, _super);

  function Person() {
    return Person.__super__.constructor.apply(this, arguments);
  }

  Person.prototype.initialize = function() {
    this.template = fb.templateLoader.get("Person");
    this.model.on("change", this.render, this);
    return this.render();
  };

  Person.prototype.render = function() {
    this.$el.html(this.template.render(this.model.toJSON()));
    return this;
  };

  return Person;

})(Backbone.View);

},{"../app":1,"../fb":4}],15:[function(require,module,exports){
// Generated by CoffeeScript 1.7.1
var app, fb,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

app = require('../app');

fb = require('../fb');

app.views.Post = (function(_super) {
  __extends(Post, _super);

  function Post() {
    return Post.__super__.constructor.apply(this, arguments);
  }

  Post.prototype.initialize = function() {
    this.template = fb.templateLoader.get("Post");
    return this.render();
  };

  Post.prototype.render = function() {
    this.$el.html(this.template.render());
    return this;
  };

  Post.prototype.events = {
    "click .post": "postMessage"
  };

  Post.prototype.postMessage = function() {
    var status;
    status = {
      name: $(".itemName").val(),
      link: $(".link").val(),
      picture: $(".picture").val(),
      caption: $(".caption").val(),
      description: $(".description").val()
    };
    FB.api("/me/feed", "post", status, function(response) {
      if (response && response.id) {
        return alert("Your post was published.");
      } else {
        return alert("Your post was not published.");
      }
    });
    return false;
  };

  return Post;

})(Backbone.View);

},{"../app":1,"../fb":4}],16:[function(require,module,exports){
// Generated by CoffeeScript 1.7.1
var app, fb,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

app = require('../app');

fb = require('../fb');

app.views.PostUI = (function(_super) {
  __extends(PostUI, _super);

  function PostUI() {
    return PostUI.__super__.constructor.apply(this, arguments);
  }

  PostUI.prototype.initialize = function() {
    this.template = fb.templateLoader.get("PostUI");
    return this.render();
  };

  PostUI.prototype.render = function() {
    this.$el.html(this.template.render());
    return this;
  };

  PostUI.prototype.events = {
    "click .post": "postMessage"
  };

  PostUI.prototype.postMessage = function() {
    FB.ui({
      method: "feed",
      name: "Sociogram Application",
      link: "http://coenraets.org/blog/sociogram",
      picture: "http://coenraets.org/sociogram/img/sociogram.jpg",
      caption: "by Christophe Coenraets",
      description: "Sociogram is a simple application that shows how to use the Facebook JavaScript SDK and the Graph API."
    }, function(response) {
      if (response && response.id) {
        return alert("Your post was published.");
      } else {
        return alert("Your post was not published.");
      }
    });
    return false;
  };

  return PostUI;

})(Backbone.View);

},{"../app":1,"../fb":4}],17:[function(require,module,exports){
// Generated by CoffeeScript 1.7.1
var app, fb,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

app = require('../app');

fb = require('../fb');

app.views.Revoke = (function(_super) {
  __extends(Revoke, _super);

  function Revoke() {
    return Revoke.__super__.constructor.apply(this, arguments);
  }

  Revoke.prototype.initialize = function() {
    this.template = fb.templateLoader.get("Revoke");
    return this.render();
  };

  Revoke.prototype.render = function() {
    this.$el.html(this.template.render());
    return this;
  };

  Revoke.prototype.events = {
    "click .revoke": "revoke"
  };

  Revoke.prototype.revoke = function() {
    FB.api("/me/permissions", "delete", function() {
      alert("Permissions revoked");
      return FB.getLoginStatus();
    });
    return false;
  };

  return Revoke;

})(Backbone.View);

},{"../app":1,"../fb":4}],18:[function(require,module,exports){
// Generated by CoffeeScript 1.7.1
var app, fb,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

app = require('../app');

fb = require('../fb');

app.views.Shell = (function(_super) {
  __extends(Shell, _super);

  function Shell() {
    return Shell.__super__.constructor.apply(this, arguments);
  }

  Shell.prototype.initialize = function() {
    this.template = fb.templateLoader.get("Shell");
    return this.render();
  };

  Shell.prototype.render = function() {
    this.$el.html(this.template.render(this.model.toJSON()));
    new app.views.Login({
      model: this.model,
      el: "#login"
    });
    return this;
  };

  Shell.prototype.events = {
    "mousedown li": "mouseDown",
    "mouseup li": "mouseUp",
    "click .btn-login": "login"
  };

  Shell.prototype.mouseDown = function(e) {
    return $(e.currentTarget).addClass("active");
  };

  Shell.prototype.mouseUp = function() {
    return $("li").removeClass("active");
  };

  Shell.prototype.login = function() {
    $(document).trigger("login");
    return false;
  };

  return Shell;

})(Backbone.View);

},{"../app":1,"../fb":4}],19:[function(require,module,exports){
// Generated by CoffeeScript 1.7.1
var app, fb,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

app = require('../app');

fb = require('../fb');

app.views.Welcome = (function(_super) {
  __extends(Welcome, _super);

  function Welcome() {
    return Welcome.__super__.constructor.apply(this, arguments);
  }

  Welcome.prototype.initialize = function() {
    var self;
    self = this;
    this.template = fb.templateLoader.get("Welcome");
    this.model.on("change", this.showHideButtons, this);
    return this.render();
  };

  Welcome.prototype.render = function() {
    this.$el.html(this.template.render());
    this.showHideButtons();
    return this;
  };

  Welcome.prototype.showHideButtons = function() {
    if (this.model.get("id") !== "") {
      $(".btn-login", this.el).addClass("hidden");
      return $(".btn-profile", this.el).removeClass("hidden");
    } else {
      $(".btn-login", this.el).removeClass("hidden");
      return $(".btn-profile", this.el).addClass("hidden");
    }
  };

  return Welcome;

})(Backbone.View);

},{"../app":1,"../fb":4}]},{},[5])
//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlcyI6WyIvaG9tZS9icnVjZS9PcGVuU2hpZnQvZnJvZG8vdG1wL3NvY2lvZ3JhbS9hcHAuanMiLCIvaG9tZS9icnVjZS9PcGVuU2hpZnQvZnJvZG8vdG1wL3NvY2lvZ3JhbS9jb250cm9sbGVycy9BcHBsaWNhdGlvbi5qcyIsIi9ob21lL2JydWNlL09wZW5TaGlmdC9mcm9kby90bXAvc29jaW9ncmFtL2NvbnRyb2xsZXJzL1JvdXRlci5qcyIsIi9ob21lL2JydWNlL09wZW5TaGlmdC9mcm9kby90bXAvc29jaW9ncmFtL2ZiLmpzIiwiL2hvbWUvYnJ1Y2UvT3BlblNoaWZ0L2Zyb2RvL3RtcC9zb2Npb2dyYW0vaW5kZXguanMiLCIvaG9tZS9icnVjZS9PcGVuU2hpZnQvZnJvZG8vdG1wL3NvY2lvZ3JhbS9saWIvRE9NRmlsZVN5c3RlbS5qcyIsIi9ob21lL2JydWNlL09wZW5TaGlmdC9mcm9kby90bXAvc29jaW9ncmFtL2xpYi9UZW1wbGF0ZUxvYWRlci5qcyIsIi9ob21lL2JydWNlL09wZW5TaGlmdC9mcm9kby90bXAvc29jaW9ncmFtL21vZGVscy9QZXJzb24uanMiLCIvaG9tZS9icnVjZS9PcGVuU2hpZnQvZnJvZG8vdG1wL3NvY2lvZ3JhbS9tb2RlbHMvUGVyc29uQ29sbGVjdGlvbi5qcyIsIi9ob21lL2JydWNlL09wZW5TaGlmdC9mcm9kby90bXAvc29jaW9ncmFtL3ZpZXdzL0Vycm9yLmpzIiwiL2hvbWUvYnJ1Y2UvT3BlblNoaWZ0L2Zyb2RvL3RtcC9zb2Npb2dyYW0vdmlld3MvRmVlZC5qcyIsIi9ob21lL2JydWNlL09wZW5TaGlmdC9mcm9kby90bXAvc29jaW9ncmFtL3ZpZXdzL0ZyaWVuZHMuanMiLCIvaG9tZS9icnVjZS9PcGVuU2hpZnQvZnJvZG8vdG1wL3NvY2lvZ3JhbS92aWV3cy9Mb2dpbi5qcyIsIi9ob21lL2JydWNlL09wZW5TaGlmdC9mcm9kby90bXAvc29jaW9ncmFtL3ZpZXdzL1BlcnNvbi5qcyIsIi9ob21lL2JydWNlL09wZW5TaGlmdC9mcm9kby90bXAvc29jaW9ncmFtL3ZpZXdzL1Bvc3QuanMiLCIvaG9tZS9icnVjZS9PcGVuU2hpZnQvZnJvZG8vdG1wL3NvY2lvZ3JhbS92aWV3cy9Qb3N0VUkuanMiLCIvaG9tZS9icnVjZS9PcGVuU2hpZnQvZnJvZG8vdG1wL3NvY2lvZ3JhbS92aWV3cy9SZXZva2UuanMiLCIvaG9tZS9icnVjZS9PcGVuU2hpZnQvZnJvZG8vdG1wL3NvY2lvZ3JhbS92aWV3cy9TaGVsbC5qcyIsIi9ob21lL2JydWNlL09wZW5TaGlmdC9mcm9kby90bXAvc29jaW9ncmFtL3ZpZXdzL1dlbGNvbWUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDekpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25FQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlc0NvbnRlbnQiOlsiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjcuMVxudmFyIGFwcDtcblxubW9kdWxlLmV4cG9ydHMgPSBhcHAgPSAoZnVuY3Rpb24oKSB7XG4gIGZ1bmN0aW9uIGFwcCgpIHt9XG5cbiAgcmV0dXJuIGFwcDtcblxufSkoKTtcblxuYXBwLm1vZGVscyA9IChmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gbW9kZWxzKCkge31cblxuICByZXR1cm4gbW9kZWxzO1xuXG59KSgpO1xuXG5hcHAudmlld3MgPSAoZnVuY3Rpb24oKSB7XG4gIGZ1bmN0aW9uIHZpZXdzKCkge31cblxuICByZXR1cm4gdmlld3M7XG5cbn0pKCk7XG5cbmFwcC5jb250cm9sbGVycyA9IChmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gY29udHJvbGxlcnMoKSB7fVxuXG4gIHJldHVybiBjb250cm9sbGVycztcblxufSkoKTtcblxuYXBwLmxpYiA9IChmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gbGliKCkge31cblxuICByZXR1cm4gbGliO1xuXG59KSgpO1xuXG5yZXF1aXJlKCcuL2xpYi9UZW1wbGF0ZUxvYWRlcicpO1xuXG5yZXF1aXJlKCcuL2xpYi9ET01GaWxlU3lzdGVtJyk7XG5cbnJlcXVpcmUoJy4vY29udHJvbGxlcnMvQXBwbGljYXRpb24nKTtcblxucmVxdWlyZSgnLi9jb250cm9sbGVycy9Sb3V0ZXInKTtcblxucmVxdWlyZSgnLi9tb2RlbHMvUGVyc29uJyk7XG5cbnJlcXVpcmUoJy4vbW9kZWxzL1BlcnNvbkNvbGxlY3Rpb24nKTtcblxucmVxdWlyZSgnLi92aWV3cy9FcnJvcicpO1xuXG5yZXF1aXJlKCcuL3ZpZXdzL0ZlZWQnKTtcblxucmVxdWlyZSgnLi92aWV3cy9GcmllbmRzJyk7XG5cbnJlcXVpcmUoJy4vdmlld3MvTG9naW4nKTtcblxucmVxdWlyZSgnLi92aWV3cy9QZXJzb24nKTtcblxucmVxdWlyZSgnLi92aWV3cy9Qb3N0Jyk7XG5cbnJlcXVpcmUoJy4vdmlld3MvUG9zdFVJJyk7XG5cbnJlcXVpcmUoJy4vdmlld3MvUmV2b2tlJyk7XG5cbnJlcXVpcmUoJy4vdmlld3MvU2hlbGwnKTtcblxucmVxdWlyZSgnLi92aWV3cy9XZWxjb21lJyk7XG4iLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuNy4xXG52YXIgYXBwO1xuXG5hcHAgPSByZXF1aXJlKCcuLi9hcHAnKTtcblxuYXBwLmNvbnRyb2xsZXJzLkFwcGxpY2F0aW9uID0gKGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBBcHBsaWNhdGlvbigpIHtcbiAgICB0aGlzLnVzZXIgPSBudWxsO1xuICAgIHRoaXMuc2hlbGwgPSBudWxsO1xuICAgIHRoaXMucm91dGVyID0gbnVsbDtcbiAgICB0aGlzLm1vZGVscyA9IHt9O1xuICAgIHRoaXMudmlld3MgPSB7fTtcbiAgICB0aGlzLnRlbXBsYXRlTG9hZGVyID0gbmV3IGFwcC5saWIuVGVtcGxhdGVMb2FkZXIoKTtcbiAgfVxuXG4gIHJldHVybiBBcHBsaWNhdGlvbjtcblxufSkoKTtcbiIsIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS43LjFcbnZhciBhcHAsIGZiLFxuICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSxcbiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07XG5cbmFwcCA9IHJlcXVpcmUoJy4uL2FwcCcpO1xuXG5mYiA9IHJlcXVpcmUoJy4uL2ZiJyk7XG5cbmFwcC5jb250cm9sbGVycy5Sb3V0ZXIgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gIF9fZXh0ZW5kcyhSb3V0ZXIsIF9zdXBlcik7XG5cbiAgZnVuY3Rpb24gUm91dGVyKCkge1xuICAgIHJldHVybiBSb3V0ZXIuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBSb3V0ZXIucHJvdG90eXBlLnJvdXRlcyA9IHtcbiAgICBcIlwiOiBcIndlbGNvbWVcIixcbiAgICBtZTogXCJtZVwiLFxuICAgIFwibWUvZnJpZW5kc1wiOiBcIm15ZnJpZW5kc1wiLFxuICAgIFwicGVyc29uLzppZFwiOiBcInBlcnNvblwiLFxuICAgIFwicGVyc29uLzppZC9mcmllbmRzXCI6IFwiZnJpZW5kc1wiLFxuICAgIFwicGVyc29uLzppZC9tdXR1YWxmcmllbmRzXCI6IFwibXV0dWFsZnJpZW5kc1wiLFxuICAgIFwicGVyc29uLzppZC9mZWVkXCI6IFwiZmVlZFwiLFxuICAgIHJldm9rZTogXCJyZXZva2VcIixcbiAgICBwb3N0OiBcInBvc3RcIixcbiAgICBwb3N0dWk6IFwicG9zdHVpXCJcbiAgfTtcblxuICBSb3V0ZXIucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy53ZWxjb21lVmlldyA9IG5ldyBhcHAudmlld3MuV2VsY29tZSh7XG4gICAgICBtb2RlbDogZmIudXNlclxuICAgIH0pO1xuICB9O1xuXG4gIFJvdXRlci5wcm90b3R5cGUud2VsY29tZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAkKFwiI2NvbnRlbnRcIikuaHRtbCh0aGlzLndlbGNvbWVWaWV3LmVsKTtcbiAgfTtcblxuICBSb3V0ZXIucHJvdG90eXBlLm1lID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMucGVyc29uKFwibWVcIik7XG4gIH07XG5cbiAgUm91dGVyLnByb3RvdHlwZS5teWZyaWVuZHMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5mcmllbmRzKFwibWVcIik7XG4gIH07XG5cbiAgUm91dGVyLnByb3RvdHlwZS5wZXJzb24gPSBmdW5jdGlvbihpZCkge1xuICAgIHZhciBlO1xuICAgICQoXCIjY29udGVudFwiKS5odG1sKFwiPGRpdiBjbGFzcz1cXFwiYnJlYWRjcnVtYiBhcGlcXFwiPkZCLmFwaShcXFwiL1wiICsgaWQgKyBcIlxcXCIpOzwvZGl2PlwiKTtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIEZCLmFwaShcIi9cIiArIGlkLCAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuc2hvd0Vycm9yUGFnZSgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gJChcIiNjb250ZW50XCIpLmFwcGVuZChuZXcgYXBwLnZpZXdzLlBlcnNvbih7XG4gICAgICAgICAgICAgIG1vZGVsOiBuZXcgYXBwLm1vZGVscy5QZXJzb24ocmVzcG9uc2UpXG4gICAgICAgICAgICB9KS5lbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfSkodGhpcykpO1xuICAgIH0gY2F0Y2ggKF9lcnJvcikge1xuICAgICAgZSA9IF9lcnJvcjtcbiAgICAgIHJldHVybiB0aGlzLnNob3dFcnJvclBhZ2UoKTtcbiAgICB9XG4gIH07XG5cbiAgUm91dGVyLnByb3RvdHlwZS5mcmllbmRzID0gZnVuY3Rpb24oaWQpIHtcbiAgICB2YXIgZTtcbiAgICAkKFwiI2NvbnRlbnRcIikuaHRtbChcIjxkaXYgY2xhc3M9XFxcImJyZWFkY3J1bWIgYXBpXFxcIj5GQi5hcGkoXFxcIi9cIiArIGlkICsgXCIvZnJpZW5kc1xcXCIpOzwvZGl2PlwiKTtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIEZCLmFwaShcIi9cIiArIGlkICsgXCIvZnJpZW5kcz9saW1pdD0yMFwiLCAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuc2hvd0Vycm9yUGFnZSgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gJChcIiNjb250ZW50XCIpLmFwcGVuZChuZXcgYXBwLnZpZXdzLkZyaWVuZHMoe1xuICAgICAgICAgICAgICBtb2RlbDogbmV3IEJhY2tib25lLk1vZGVsKHJlc3BvbnNlKVxuICAgICAgICAgICAgfSkuZWwpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpKTtcbiAgICB9IGNhdGNoIChfZXJyb3IpIHtcbiAgICAgIGUgPSBfZXJyb3I7XG4gICAgICByZXR1cm4gdGhpcy5zaG93RXJyb3JQYWdlKCk7XG4gICAgfVxuICB9O1xuXG4gIFJvdXRlci5wcm90b3R5cGUubXV0dWFsZnJpZW5kcyA9IGZ1bmN0aW9uKGlkKSB7XG4gICAgdmFyIGU7XG4gICAgJChcIiNjb250ZW50XCIpLmh0bWwoXCI8ZGl2IGNsYXNzPVxcXCJicmVhZGNydW1iIGFwaVxcXCI+RkIuYXBpKFxcXCIvXCIgKyBpZCArIFwiL211dHVhbGZyaWVuZHNcXFwiKTs8L2Rpdj5cIik7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBGQi5hcGkoXCIvXCIgKyBpZCArIFwiL211dHVhbGZyaWVuZHM/bGltaXQ9MjBcIiwgKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgIGlmIChyZXNwb25zZS5lcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnNob3dFcnJvclBhZ2UoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuICQoXCIjY29udGVudFwiKS5hcHBlbmQobmV3IGFwcC52aWV3cy5GcmllbmRzKHtcbiAgICAgICAgICAgICAgbW9kZWw6IG5ldyBCYWNrYm9uZS5Nb2RlbChyZXNwb25zZSlcbiAgICAgICAgICAgIH0pLmVsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9KSh0aGlzKSk7XG4gICAgfSBjYXRjaCAoX2Vycm9yKSB7XG4gICAgICBlID0gX2Vycm9yO1xuICAgICAgcmV0dXJuIHRoaXMuc2hvd0Vycm9yUGFnZSgpO1xuICAgIH1cbiAgfTtcblxuICBSb3V0ZXIucHJvdG90eXBlLmZlZWQgPSBmdW5jdGlvbihpZCkge1xuICAgIHZhciBlO1xuICAgICQoXCIjY29udGVudFwiKS5odG1sKFwiPGRpdiBjbGFzcz1cXFwiYnJlYWRjcnVtYiBhcGlcXFwiPkZCLmFwaShcXFwiL1wiICsgaWQgKyBcIi9mZWVkXFxcIik7PC9kaXY+XCIpO1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gRkIuYXBpKFwiL1wiICsgaWQgKyBcIi9mZWVkP2xpbWl0PTIwXCIsIChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICBpZiAocmVzcG9uc2UuZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5zaG93RXJyb3JQYWdlKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiAkKFwiI2NvbnRlbnRcIikuYXBwZW5kKG5ldyBhcHAudmlld3MuRmVlZCh7XG4gICAgICAgICAgICAgIG1vZGVsOiBuZXcgQmFja2JvbmUuTW9kZWwocmVzcG9uc2UpXG4gICAgICAgICAgICB9KS5lbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfSkodGhpcykpO1xuICAgIH0gY2F0Y2ggKF9lcnJvcikge1xuICAgICAgZSA9IF9lcnJvcjtcbiAgICAgIHJldHVybiB0aGlzLnNob3dFcnJvclBhZ2UoKTtcbiAgICB9XG4gIH07XG5cbiAgUm91dGVyLnByb3RvdHlwZS5wb3N0ID0gZnVuY3Rpb24oKSB7XG4gICAgJChcIiNjb250ZW50XCIpLmh0bWwoXCI8ZGl2IGNsYXNzPVxcXCJicmVhZGNydW1iIGFwaVxcXCI+RkIuYXBpKFxcXCIvbWUvZmVlZFxcXCIsIFxcXCJwb3N0XFxcIiwgZGF0YSk7PC9kaXY+XCIpO1xuICAgIHJldHVybiAkKFwiI2NvbnRlbnRcIikuYXBwZW5kKG5ldyBhcHAudmlld3MuUG9zdCgpLmVsKTtcbiAgfTtcblxuICBSb3V0ZXIucHJvdG90eXBlLnBvc3R1aSA9IGZ1bmN0aW9uKCkge1xuICAgICQoXCIjY29udGVudFwiKS5odG1sKFwiPGRpdiBjbGFzcz1cXFwiYnJlYWRjcnVtYiBhcGlcXFwiPkZCLnVpKCk7PC9kaXY+XCIpO1xuICAgIHJldHVybiAkKFwiI2NvbnRlbnRcIikuYXBwZW5kKG5ldyBhcHAudmlld3MuUG9zdFVJKCkuZWwpO1xuICB9O1xuXG4gIFJvdXRlci5wcm90b3R5cGUucmV2b2tlID0gZnVuY3Rpb24oKSB7XG4gICAgJChcIiNjb250ZW50XCIpLmh0bWwoXCI8ZGl2IGNsYXNzPVxcXCJicmVhZGNydW1iIGFwaVxcXCI+RkIuYXBpKFxcXCIvbWUvcGVybWlzc2lvbnNcXFwiLCBcXFwiZGVsZXRlXFxcIik7PC9kaXY+XCIpO1xuICAgIHJldHVybiAkKFwiI2NvbnRlbnRcIikuYXBwZW5kKG5ldyBhcHAudmlld3MuUmV2b2tlKCkuZWwpO1xuICB9O1xuXG4gIFJvdXRlci5wcm90b3R5cGUuc2hvd0Vycm9yUGFnZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAkKFwiI2NvbnRlbnRcIikuYXBwZW5kKG5ldyBhcHAudmlld3MuRXJyb3IoKS5lbCk7XG4gIH07XG5cbiAgcmV0dXJuIFJvdXRlcjtcblxufSkoQmFja2JvbmUuUm91dGVyKTtcbiIsIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS43LjFcbnZhciBhcHAsIGZiO1xuXG5hcHAgPSByZXF1aXJlKCcuL2FwcCcpO1xuXG5mYiA9IG5ldyBhcHAuY29udHJvbGxlcnMuQXBwbGljYXRpb247XG5cbm1vZHVsZS5leHBvcnRzID0gZmI7XG4iLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuNy4xXG52YXIgYXBwLCBmYjtcblxuYXBwID0gcmVxdWlyZSgnLi9hcHAnKTtcblxuZmIgPSByZXF1aXJlKCcuL2ZiJyk7XG5cbihmdW5jdGlvbihkKSB7XG4gIHZhciBpZCwganMsIHJlZjtcbiAgaWQgPSBcImZhY2Vib29rLWpzc2RrXCI7XG4gIHJlZiA9IGQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzY3JpcHRcIilbMF07XG4gIGlmIChkLmdldEVsZW1lbnRCeUlkKGlkKSkge1xuICAgIHJldHVybjtcbiAgfVxuICBqcyA9IGQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcbiAganMuaWQgPSBpZDtcbiAganMuYXN5bmMgPSB0cnVlO1xuICBqcy5zcmMgPSBcIi8vY29ubmVjdC5mYWNlYm9vay5uZXQvZW5fVVMvYWxsLmpzXCI7XG4gIHJldHVybiByZWYucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoanMsIHJlZik7XG59KShkb2N1bWVudCk7XG5cbndpbmRvdy5mYkFzeW5jSW5pdCA9IGZ1bmN0aW9uKCkge1xuICBGQi5FdmVudC5zdWJzY3JpYmUoXCJhdXRoLnN0YXR1c0NoYW5nZVwiLCBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgIHJldHVybiAkKGRvY3VtZW50KS50cmlnZ2VyKFwiZmJTdGF0dXNDaGFuZ2VcIiwgcmVzcG9uc2UpO1xuICB9KTtcbiAgcmV0dXJuIEZCLmluaXQoe1xuICAgIGFwcElkOiBcIjE0Nzg5MzAzNDIzMjgzODhcIixcbiAgICBjaGFubmVsVXJsOiBcIi8vbG9jYWxob3N0L2NoYW5uZWwuaHRtbFwiLFxuICAgIHN0YXR1czogdHJ1ZSxcbiAgICBjb29raWU6IHRydWUsXG4gICAgeGZibWw6IHRydWVcbiAgfSk7XG59O1xuXG4kKGRvY3VtZW50KS5vbihcInJlYWR5XCIsIGZ1bmN0aW9uKCkge1xuICBmYi51c2VyID0gbmV3IGFwcC5tb2RlbHMuUGVyc29uKCk7XG4gIHJldHVybiBmYi50ZW1wbGF0ZUxvYWRlci5sb2FkKFtcIlNoZWxsXCIsIFwiV2VsY29tZVwiLCBcIkxvZ2luXCIsIFwiUGVyc29uXCIsIFwiRnJpZW5kc1wiLCBcIkZlZWRcIiwgXCJQb3N0XCIsIFwiUG9zdFVJXCIsIFwiRXJyb3JcIiwgXCJSZXZva2VcIl0sIGZ1bmN0aW9uKCkge1xuICAgIGZiLnNoZWxsID0gbmV3IGFwcC52aWV3cy5TaGVsbCh7XG4gICAgICBlbDogXCIjc2hlbGxcIixcbiAgICAgIG1vZGVsOiBmYi51c2VyXG4gICAgfSk7XG4gICAgZmIucm91dGVyID0gbmV3IGFwcC5jb250cm9sbGVycy5Sb3V0ZXIoKTtcbiAgICByZXR1cm4gQmFja2JvbmUuaGlzdG9yeS5zdGFydCgpO1xuICB9KTtcbn0pO1xuXG4kKGRvY3VtZW50KS5vbihcImZiU3RhdHVzQ2hhbmdlXCIsIGZ1bmN0aW9uKGV2ZW50LCBkYXRhKSB7XG4gIGlmIChkYXRhLnN0YXR1cyA9PT0gXCJjb25uZWN0ZWRcIikge1xuICAgIHJldHVybiBGQi5hcGkoXCIvbWVcIiwgZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgIHJldHVybiBmYi51c2VyLnNldChyZXNwb25zZSk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGZiLnVzZXIuc2V0KGZiLnVzZXIuZGVmYXVsdHMpO1xuICB9XG59KTtcblxuJChkb2N1bWVudCkub24oXCJsb2dvdXRcIiwgZnVuY3Rpb24oKSB7XG4gIEZCLmxvZ291dCgpO1xuICByZXR1cm4gZmFsc2U7XG59KTtcblxuJChkb2N1bWVudCkub24oXCJsb2dpblwiLCBmdW5jdGlvbigpIHtcbiAgRkIubG9naW4oKGZ1bmN0aW9uKCkge30pLCB7XG4gICAgc2NvcGU6IFwicHVibGlzaF9hY3Rpb25zXCJcbiAgfSk7XG4gIHJldHVybiBmYWxzZTtcbn0pO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjcuMVxudmFyIGFwcDtcblxuYXBwID0gcmVxdWlyZSgnLi4vYXBwJyk7XG5cbmFwcC5saWIuRE9NRmlsZVN5c3RlbSA9IChmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gRE9NRmlsZVN5c3RlbSgpIHt9XG5cbiAgRE9NRmlsZVN5c3RlbS5wcm90b3R5cGUucmVhZFRlbXBsYXRlRmlsZSA9IGZ1bmN0aW9uKCR0ZW1wbGF0ZSkge1xuICAgIHZhciBlbDtcbiAgICBpZiAoKGVsID0gJCgnIycgKyAkdGVtcGxhdGUpKSAhPSBudWxsKSB7XG4gICAgICByZXR1cm4gZWwudGV4dCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBMaXF1aWQuRmlsZVN5c3RlbUVycm9yKFwiVGVtcGxhdGUgbm90IGZvdW5kOiBcIiArICR0ZW1wbGF0ZSk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBET01GaWxlU3lzdGVtO1xuXG59KSgpO1xuXG5MaXF1aWQuVGVtcGxhdGUuZmlsZVN5c3RlbSA9IG5ldyBhcHAubGliLkRPTUZpbGVTeXN0ZW07XG4iLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuNy4xXG52YXIgYXBwO1xuXG5hcHAgPSByZXF1aXJlKCcuLi9hcHAnKTtcblxuYXBwLmxpYi5UZW1wbGF0ZUxvYWRlciA9IChmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gVGVtcGxhdGVMb2FkZXIoKSB7XG4gICAgdGhpcy50ZW1wbGF0ZXMgPSB7fTtcbiAgfVxuXG4gIFRlbXBsYXRlTG9hZGVyLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24obmFtZXMsIGNhbGxiYWNrKSB7XG4gICAgdmFyIGRlZmVycmVkcztcbiAgICBkZWZlcnJlZHMgPSBbXTtcbiAgICAkLmVhY2gobmFtZXMsIChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKGluZGV4LCBuYW1lKSB7XG4gICAgICAgIGlmIChhcHAudmlld3NbbmFtZV0pIHtcbiAgICAgICAgICByZXR1cm4gZGVmZXJyZWRzLnB1c2goJC5nZXQoXCJ0cGwvXCIgKyBuYW1lLnRvTG93ZXJDYXNlKCkgKyBcIi5saXF1aWRcIiwgZnVuY3Rpb24odGVtcGxhdGUpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy50ZW1wbGF0ZXNbbmFtZV0gPSBMaXF1aWQuVGVtcGxhdGUucGFyc2UodGVtcGxhdGUpO1xuICAgICAgICAgIH0pKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gYWxlcnQobmFtZSArIFwiIG5vdCBmb3VuZFwiKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9KSh0aGlzKSk7XG4gICAgcmV0dXJuICQud2hlbi5hcHBseShudWxsLCBkZWZlcnJlZHMpLmRvbmUoY2FsbGJhY2spO1xuICB9O1xuXG4gIFRlbXBsYXRlTG9hZGVyLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuIHRoaXMudGVtcGxhdGVzW25hbWVdO1xuICB9O1xuXG4gIHJldHVybiBUZW1wbGF0ZUxvYWRlcjtcblxufSkoKTtcbiIsIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS43LjFcbnZhciBhcHAsXG4gIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LFxuICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTtcblxuYXBwID0gcmVxdWlyZSgnLi4vYXBwJyk7XG5cbmFwcC5tb2RlbHMuUGVyc29uID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICBfX2V4dGVuZHMoUGVyc29uLCBfc3VwZXIpO1xuXG4gIGZ1bmN0aW9uIFBlcnNvbigpIHtcbiAgICByZXR1cm4gUGVyc29uLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgUGVyc29uLnByb3RvdHlwZS5kZWZhdWx0cyA9IHtcbiAgICBpZDogXCJcIixcbiAgICBuYW1lOiBcIlwiLFxuICAgIGZpcnN0X25hbWU6IFwiXCIsXG4gICAgbGFzdF9uYW1lOiBcIlwiLFxuICAgIGdlbmRlcjogXCJcIixcbiAgICB1c2VybmFtZTogXCJcIixcbiAgICBsaW5rOiBcIlwiLFxuICAgIGxvY2FsZTogXCJcIixcbiAgICB0aW1lem9uZTogXCJcIlxuICB9O1xuXG4gIHJldHVybiBQZXJzb247XG5cbn0pKEJhY2tib25lLk1vZGVsKTtcbiIsIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS43LjFcbnZhciBhcHAsXG4gIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LFxuICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTtcblxuYXBwID0gcmVxdWlyZSgnLi4vYXBwJyk7XG5cbmFwcC5tb2RlbHMuUGVyc29uQ29sbGVjdGlvbiA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgX19leHRlbmRzKFBlcnNvbkNvbGxlY3Rpb24sIF9zdXBlcik7XG5cbiAgZnVuY3Rpb24gUGVyc29uQ29sbGVjdGlvbigpIHtcbiAgICByZXR1cm4gUGVyc29uQ29sbGVjdGlvbi5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIFBlcnNvbkNvbGxlY3Rpb24ucHJvdG90eXBlLm1vZGVsID0gYXBwLm1vZGVscy5QZXJzb247XG5cbiAgcmV0dXJuIFBlcnNvbkNvbGxlY3Rpb247XG5cbn0pKEJhY2tib25lLkNvbGxlY3Rpb24pO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjcuMVxudmFyIGFwcCwgZmIsXG4gIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LFxuICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTtcblxuYXBwID0gcmVxdWlyZSgnLi4vYXBwJyk7XG5cbmZiID0gcmVxdWlyZSgnLi4vZmInKTtcblxuYXBwLnZpZXdzLkVycm9yID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICBfX2V4dGVuZHMoRXJyb3IsIF9zdXBlcik7XG5cbiAgZnVuY3Rpb24gRXJyb3IoKSB7XG4gICAgcmV0dXJuIEVycm9yLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgRXJyb3IucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnRlbXBsYXRlID0gZmIudGVtcGxhdGVMb2FkZXIuZ2V0KFwiRXJyb3JcIik7XG4gICAgcmV0dXJuIHRoaXMucmVuZGVyKCk7XG4gIH07XG5cbiAgRXJyb3IucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuJGVsLmh0bWwodGhpcy50ZW1wbGF0ZS5yZW5kZXIoKSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgRXJyb3IucHJvdG90eXBlLmV2ZW50cyA9IHtcbiAgICBcImNsaWNrIC5yZXRyeVwiOiBcInJldHJ5XCJcbiAgfTtcblxuICBFcnJvci5wcm90b3R5cGUucmV0cnkgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gQmFja2JvbmUuaGlzdG9yeS5sb2FkVXJsKEJhY2tib25lLmhpc3RvcnkuZnJhZ21lbnQpO1xuICB9O1xuXG4gIHJldHVybiBFcnJvcjtcblxufSkoQmFja2JvbmUuVmlldyk7XG4iLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuNy4xXG52YXIgYXBwLFxuICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSxcbiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07XG5cbmFwcCA9IHJlcXVpcmUoJy4uL2FwcCcpO1xuXG5hcHAudmlld3MuRmVlZCA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgX19leHRlbmRzKEZlZWQsIF9zdXBlcik7XG5cbiAgZnVuY3Rpb24gRmVlZCgpIHtcbiAgICByZXR1cm4gRmVlZC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIEZlZWQucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnRlbXBsYXRlID0gZmIudGVtcGxhdGVMb2FkZXIuZ2V0KFwiRmVlZFwiKTtcbiAgICB0aGlzLm1vZGVsLm9uKFwiY2hhbmdlXCIsIHRoaXMucmVuZGVyLCB0aGlzKTtcbiAgICByZXR1cm4gdGhpcy5yZW5kZXIoKTtcbiAgfTtcblxuICBGZWVkLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLiRlbC5odG1sKHRoaXMudGVtcGxhdGUucmVuZGVyKHRoaXMubW9kZWwudG9KU09OKCkpKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBGZWVkLnByb3RvdHlwZS5ldmVudHMgPSB7XG4gICAgXCJjbGljayAubmV4dFwiOiBcIm5leHRcIixcbiAgICBcImNsaWNrIC5wcmV2aW91c1wiOiBcInByZXZpb3VzXCJcbiAgfTtcblxuICBGZWVkLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5mZXRjaCh0aGlzLm1vZGVsLmdldChcInBhZ2luZ1wiKS5uZXh0KTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgRmVlZC5wcm90b3R5cGUucHJldmlvdXMgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmZldGNoKHRoaXMubW9kZWwuZ2V0KFwicGFnaW5nXCIpLnByZXZpb3VzKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgRmVlZC5wcm90b3R5cGUuZmV0Y2ggPSBmdW5jdGlvbih1cmwpIHtcbiAgICB2YXIgc2VsZjtcbiAgICBzZWxmID0gdGhpcztcbiAgICByZXR1cm4gJC5hamF4KHtcbiAgICAgIHVybDogdXJsLFxuICAgICAgZGF0YVR5cGU6IFwianNvblwiXG4gICAgfSkuZG9uZShmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgcmV0dXJuIHNlbGYubW9kZWwuc2V0KHJlc3BvbnNlKTtcbiAgICB9KS5mYWlsKGZ1bmN0aW9uKGUpIHtcbiAgICAgIHJldHVybiBhbGVydChcIkVycm9yIGZldGNoaW5nIGRhdGFcIik7XG4gICAgfSk7XG4gIH07XG5cbiAgcmV0dXJuIEZlZWQ7XG5cbn0pKEJhY2tib25lLlZpZXcpO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjcuMVxudmFyIGFwcCwgZmIsXG4gIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LFxuICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTtcblxuYXBwID0gcmVxdWlyZSgnLi4vYXBwJyk7XG5cbmZiID0gcmVxdWlyZSgnLi4vZmInKTtcblxuYXBwLnZpZXdzLkZyaWVuZHMgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gIF9fZXh0ZW5kcyhGcmllbmRzLCBfc3VwZXIpO1xuXG4gIGZ1bmN0aW9uIEZyaWVuZHMoKSB7XG4gICAgcmV0dXJuIEZyaWVuZHMuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBGcmllbmRzLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy50ZW1wbGF0ZSA9IGZiLnRlbXBsYXRlTG9hZGVyLmdldChcIkZyaWVuZHNcIik7XG4gICAgdGhpcy5tb2RlbC5vbihcImNoYW5nZVwiLCB0aGlzLnJlbmRlciwgdGhpcyk7XG4gICAgcmV0dXJuIHRoaXMucmVuZGVyKCk7XG4gIH07XG5cbiAgRnJpZW5kcy5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy4kZWwuaHRtbCh0aGlzLnRlbXBsYXRlLnJlbmRlcih0aGlzLm1vZGVsLnRvSlNPTigpKSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgRnJpZW5kcy5wcm90b3R5cGUuZXZlbnRzID0ge1xuICAgIFwiY2xpY2sgLm5leHRcIjogXCJuZXh0XCIsXG4gICAgXCJjbGljayAucHJldmlvdXNcIjogXCJwcmV2aW91c1wiXG4gIH07XG5cbiAgRnJpZW5kcy5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuZmV0Y2godGhpcy5tb2RlbC5nZXQoXCJwYWdpbmdcIikubmV4dCk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIEZyaWVuZHMucHJvdG90eXBlLnByZXZpb3VzID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5mZXRjaCh0aGlzLm1vZGVsLmdldChcInBhZ2luZ1wiKS5wcmV2aW91cyk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIEZyaWVuZHMucHJvdG90eXBlLmZldGNoID0gZnVuY3Rpb24odXJsKSB7XG4gICAgdmFyIHNlbGY7XG4gICAgc2VsZiA9IHRoaXM7XG4gICAgcmV0dXJuICQuYWpheCh7XG4gICAgICB1cmw6IHVybCxcbiAgICAgIGRhdGFUeXBlOiBcImpzb25cIlxuICAgIH0pLmRvbmUoZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgIHJldHVybiBzZWxmLm1vZGVsLnNldChyZXNwb25zZSk7XG4gICAgfSkuZmFpbChmdW5jdGlvbihlKSB7XG4gICAgICByZXR1cm4gYWxlcnQoXCJFcnJvciBmZXRjaGluZyBkYXRhXCIpO1xuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiBGcmllbmRzO1xuXG59KShCYWNrYm9uZS5WaWV3KTtcbiIsIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS43LjFcbnZhciBhcHAsIGZiLFxuICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSxcbiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07XG5cbmFwcCA9IHJlcXVpcmUoJy4uL2FwcCcpO1xuXG5mYiA9IHJlcXVpcmUoJy4uL2ZiJyk7XG5cbmFwcC52aWV3cy5Mb2dpbiA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgX19leHRlbmRzKExvZ2luLCBfc3VwZXIpO1xuXG4gIGZ1bmN0aW9uIExvZ2luKCkge1xuICAgIHJldHVybiBMb2dpbi5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIExvZ2luLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy50ZW1wbGF0ZSA9IGZiLnRlbXBsYXRlTG9hZGVyLmdldChcIkxvZ2luXCIpO1xuICAgIHRoaXMubW9kZWwub24oXCJjaGFuZ2VcIiwgdGhpcy5yZW5kZXIsIHRoaXMpO1xuICAgIHJldHVybiB0aGlzLnJlbmRlcigpO1xuICB9O1xuXG4gIExvZ2luLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLiRlbC5odG1sKHRoaXMudGVtcGxhdGUucmVuZGVyKHRoaXMubW9kZWwudG9KU09OKCkpKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBMb2dpbi5wcm90b3R5cGUuZXZlbnRzID0ge1xuICAgIFwiY2xpY2sgLmxvZ2luXCI6IFwibG9naW5cIixcbiAgICBcImNsaWNrIC5sb2dvdXRcIjogXCJsb2dvdXRcIlxuICB9O1xuXG4gIExvZ2luLnByb3RvdHlwZS5sb2dpbiA9IGZ1bmN0aW9uKGUpIHtcbiAgICAkKGRvY3VtZW50KS50cmlnZ2VyKFwibG9naW5cIik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIExvZ2luLnByb3RvdHlwZS5sb2dvdXQgPSBmdW5jdGlvbihlKSB7XG4gICAgJChkb2N1bWVudCkudHJpZ2dlcihcImxvZ291dFwiKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgcmV0dXJuIExvZ2luO1xuXG59KShCYWNrYm9uZS5WaWV3KTtcbiIsIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS43LjFcbnZhciBhcHAsIGZiLFxuICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSxcbiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07XG5cbmFwcCA9IHJlcXVpcmUoJy4uL2FwcCcpO1xuXG5mYiA9IHJlcXVpcmUoJy4uL2ZiJyk7XG5cbmFwcC52aWV3cy5QZXJzb24gPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gIF9fZXh0ZW5kcyhQZXJzb24sIF9zdXBlcik7XG5cbiAgZnVuY3Rpb24gUGVyc29uKCkge1xuICAgIHJldHVybiBQZXJzb24uX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBQZXJzb24ucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnRlbXBsYXRlID0gZmIudGVtcGxhdGVMb2FkZXIuZ2V0KFwiUGVyc29uXCIpO1xuICAgIHRoaXMubW9kZWwub24oXCJjaGFuZ2VcIiwgdGhpcy5yZW5kZXIsIHRoaXMpO1xuICAgIHJldHVybiB0aGlzLnJlbmRlcigpO1xuICB9O1xuXG4gIFBlcnNvbi5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy4kZWwuaHRtbCh0aGlzLnRlbXBsYXRlLnJlbmRlcih0aGlzLm1vZGVsLnRvSlNPTigpKSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgcmV0dXJuIFBlcnNvbjtcblxufSkoQmFja2JvbmUuVmlldyk7XG4iLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuNy4xXG52YXIgYXBwLCBmYixcbiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksXG4gIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9O1xuXG5hcHAgPSByZXF1aXJlKCcuLi9hcHAnKTtcblxuZmIgPSByZXF1aXJlKCcuLi9mYicpO1xuXG5hcHAudmlld3MuUG9zdCA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgX19leHRlbmRzKFBvc3QsIF9zdXBlcik7XG5cbiAgZnVuY3Rpb24gUG9zdCgpIHtcbiAgICByZXR1cm4gUG9zdC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIFBvc3QucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnRlbXBsYXRlID0gZmIudGVtcGxhdGVMb2FkZXIuZ2V0KFwiUG9zdFwiKTtcbiAgICByZXR1cm4gdGhpcy5yZW5kZXIoKTtcbiAgfTtcblxuICBQb3N0LnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLiRlbC5odG1sKHRoaXMudGVtcGxhdGUucmVuZGVyKCkpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIFBvc3QucHJvdG90eXBlLmV2ZW50cyA9IHtcbiAgICBcImNsaWNrIC5wb3N0XCI6IFwicG9zdE1lc3NhZ2VcIlxuICB9O1xuXG4gIFBvc3QucHJvdG90eXBlLnBvc3RNZXNzYWdlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHN0YXR1cztcbiAgICBzdGF0dXMgPSB7XG4gICAgICBuYW1lOiAkKFwiLml0ZW1OYW1lXCIpLnZhbCgpLFxuICAgICAgbGluazogJChcIi5saW5rXCIpLnZhbCgpLFxuICAgICAgcGljdHVyZTogJChcIi5waWN0dXJlXCIpLnZhbCgpLFxuICAgICAgY2FwdGlvbjogJChcIi5jYXB0aW9uXCIpLnZhbCgpLFxuICAgICAgZGVzY3JpcHRpb246ICQoXCIuZGVzY3JpcHRpb25cIikudmFsKClcbiAgICB9O1xuICAgIEZCLmFwaShcIi9tZS9mZWVkXCIsIFwicG9zdFwiLCBzdGF0dXMsIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2UuaWQpIHtcbiAgICAgICAgcmV0dXJuIGFsZXJ0KFwiWW91ciBwb3N0IHdhcyBwdWJsaXNoZWQuXCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGFsZXJ0KFwiWW91ciBwb3N0IHdhcyBub3QgcHVibGlzaGVkLlwiKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgcmV0dXJuIFBvc3Q7XG5cbn0pKEJhY2tib25lLlZpZXcpO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjcuMVxudmFyIGFwcCwgZmIsXG4gIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LFxuICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTtcblxuYXBwID0gcmVxdWlyZSgnLi4vYXBwJyk7XG5cbmZiID0gcmVxdWlyZSgnLi4vZmInKTtcblxuYXBwLnZpZXdzLlBvc3RVSSA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgX19leHRlbmRzKFBvc3RVSSwgX3N1cGVyKTtcblxuICBmdW5jdGlvbiBQb3N0VUkoKSB7XG4gICAgcmV0dXJuIFBvc3RVSS5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIFBvc3RVSS5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMudGVtcGxhdGUgPSBmYi50ZW1wbGF0ZUxvYWRlci5nZXQoXCJQb3N0VUlcIik7XG4gICAgcmV0dXJuIHRoaXMucmVuZGVyKCk7XG4gIH07XG5cbiAgUG9zdFVJLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLiRlbC5odG1sKHRoaXMudGVtcGxhdGUucmVuZGVyKCkpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIFBvc3RVSS5wcm90b3R5cGUuZXZlbnRzID0ge1xuICAgIFwiY2xpY2sgLnBvc3RcIjogXCJwb3N0TWVzc2FnZVwiXG4gIH07XG5cbiAgUG9zdFVJLnByb3RvdHlwZS5wb3N0TWVzc2FnZSA9IGZ1bmN0aW9uKCkge1xuICAgIEZCLnVpKHtcbiAgICAgIG1ldGhvZDogXCJmZWVkXCIsXG4gICAgICBuYW1lOiBcIlNvY2lvZ3JhbSBBcHBsaWNhdGlvblwiLFxuICAgICAgbGluazogXCJodHRwOi8vY29lbnJhZXRzLm9yZy9ibG9nL3NvY2lvZ3JhbVwiLFxuICAgICAgcGljdHVyZTogXCJodHRwOi8vY29lbnJhZXRzLm9yZy9zb2Npb2dyYW0vaW1nL3NvY2lvZ3JhbS5qcGdcIixcbiAgICAgIGNhcHRpb246IFwiYnkgQ2hyaXN0b3BoZSBDb2VucmFldHNcIixcbiAgICAgIGRlc2NyaXB0aW9uOiBcIlNvY2lvZ3JhbSBpcyBhIHNpbXBsZSBhcHBsaWNhdGlvbiB0aGF0IHNob3dzIGhvdyB0byB1c2UgdGhlIEZhY2Vib29rIEphdmFTY3JpcHQgU0RLIGFuZCB0aGUgR3JhcGggQVBJLlwiXG4gICAgfSwgZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5pZCkge1xuICAgICAgICByZXR1cm4gYWxlcnQoXCJZb3VyIHBvc3Qgd2FzIHB1Ymxpc2hlZC5cIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gYWxlcnQoXCJZb3VyIHBvc3Qgd2FzIG5vdCBwdWJsaXNoZWQuXCIpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICByZXR1cm4gUG9zdFVJO1xuXG59KShCYWNrYm9uZS5WaWV3KTtcbiIsIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS43LjFcbnZhciBhcHAsIGZiLFxuICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSxcbiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07XG5cbmFwcCA9IHJlcXVpcmUoJy4uL2FwcCcpO1xuXG5mYiA9IHJlcXVpcmUoJy4uL2ZiJyk7XG5cbmFwcC52aWV3cy5SZXZva2UgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gIF9fZXh0ZW5kcyhSZXZva2UsIF9zdXBlcik7XG5cbiAgZnVuY3Rpb24gUmV2b2tlKCkge1xuICAgIHJldHVybiBSZXZva2UuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBSZXZva2UucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnRlbXBsYXRlID0gZmIudGVtcGxhdGVMb2FkZXIuZ2V0KFwiUmV2b2tlXCIpO1xuICAgIHJldHVybiB0aGlzLnJlbmRlcigpO1xuICB9O1xuXG4gIFJldm9rZS5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy4kZWwuaHRtbCh0aGlzLnRlbXBsYXRlLnJlbmRlcigpKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBSZXZva2UucHJvdG90eXBlLmV2ZW50cyA9IHtcbiAgICBcImNsaWNrIC5yZXZva2VcIjogXCJyZXZva2VcIlxuICB9O1xuXG4gIFJldm9rZS5wcm90b3R5cGUucmV2b2tlID0gZnVuY3Rpb24oKSB7XG4gICAgRkIuYXBpKFwiL21lL3Blcm1pc3Npb25zXCIsIFwiZGVsZXRlXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgYWxlcnQoXCJQZXJtaXNzaW9ucyByZXZva2VkXCIpO1xuICAgICAgcmV0dXJuIEZCLmdldExvZ2luU3RhdHVzKCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIHJldHVybiBSZXZva2U7XG5cbn0pKEJhY2tib25lLlZpZXcpO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjcuMVxudmFyIGFwcCwgZmIsXG4gIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LFxuICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTtcblxuYXBwID0gcmVxdWlyZSgnLi4vYXBwJyk7XG5cbmZiID0gcmVxdWlyZSgnLi4vZmInKTtcblxuYXBwLnZpZXdzLlNoZWxsID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICBfX2V4dGVuZHMoU2hlbGwsIF9zdXBlcik7XG5cbiAgZnVuY3Rpb24gU2hlbGwoKSB7XG4gICAgcmV0dXJuIFNoZWxsLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgU2hlbGwucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnRlbXBsYXRlID0gZmIudGVtcGxhdGVMb2FkZXIuZ2V0KFwiU2hlbGxcIik7XG4gICAgcmV0dXJuIHRoaXMucmVuZGVyKCk7XG4gIH07XG5cbiAgU2hlbGwucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuJGVsLmh0bWwodGhpcy50ZW1wbGF0ZS5yZW5kZXIodGhpcy5tb2RlbC50b0pTT04oKSkpO1xuICAgIG5ldyBhcHAudmlld3MuTG9naW4oe1xuICAgICAgbW9kZWw6IHRoaXMubW9kZWwsXG4gICAgICBlbDogXCIjbG9naW5cIlxuICAgIH0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIFNoZWxsLnByb3RvdHlwZS5ldmVudHMgPSB7XG4gICAgXCJtb3VzZWRvd24gbGlcIjogXCJtb3VzZURvd25cIixcbiAgICBcIm1vdXNldXAgbGlcIjogXCJtb3VzZVVwXCIsXG4gICAgXCJjbGljayAuYnRuLWxvZ2luXCI6IFwibG9naW5cIlxuICB9O1xuXG4gIFNoZWxsLnByb3RvdHlwZS5tb3VzZURvd24gPSBmdW5jdGlvbihlKSB7XG4gICAgcmV0dXJuICQoZS5jdXJyZW50VGFyZ2V0KS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcbiAgfTtcblxuICBTaGVsbC5wcm90b3R5cGUubW91c2VVcCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAkKFwibGlcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XG4gIH07XG5cbiAgU2hlbGwucHJvdG90eXBlLmxvZ2luID0gZnVuY3Rpb24oKSB7XG4gICAgJChkb2N1bWVudCkudHJpZ2dlcihcImxvZ2luXCIpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICByZXR1cm4gU2hlbGw7XG5cbn0pKEJhY2tib25lLlZpZXcpO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjcuMVxudmFyIGFwcCwgZmIsXG4gIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LFxuICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTtcblxuYXBwID0gcmVxdWlyZSgnLi4vYXBwJyk7XG5cbmZiID0gcmVxdWlyZSgnLi4vZmInKTtcblxuYXBwLnZpZXdzLldlbGNvbWUgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gIF9fZXh0ZW5kcyhXZWxjb21lLCBfc3VwZXIpO1xuXG4gIGZ1bmN0aW9uIFdlbGNvbWUoKSB7XG4gICAgcmV0dXJuIFdlbGNvbWUuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBXZWxjb21lLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNlbGY7XG4gICAgc2VsZiA9IHRoaXM7XG4gICAgdGhpcy50ZW1wbGF0ZSA9IGZiLnRlbXBsYXRlTG9hZGVyLmdldChcIldlbGNvbWVcIik7XG4gICAgdGhpcy5tb2RlbC5vbihcImNoYW5nZVwiLCB0aGlzLnNob3dIaWRlQnV0dG9ucywgdGhpcyk7XG4gICAgcmV0dXJuIHRoaXMucmVuZGVyKCk7XG4gIH07XG5cbiAgV2VsY29tZS5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy4kZWwuaHRtbCh0aGlzLnRlbXBsYXRlLnJlbmRlcigpKTtcbiAgICB0aGlzLnNob3dIaWRlQnV0dG9ucygpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIFdlbGNvbWUucHJvdG90eXBlLnNob3dIaWRlQnV0dG9ucyA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLm1vZGVsLmdldChcImlkXCIpICE9PSBcIlwiKSB7XG4gICAgICAkKFwiLmJ0bi1sb2dpblwiLCB0aGlzLmVsKS5hZGRDbGFzcyhcImhpZGRlblwiKTtcbiAgICAgIHJldHVybiAkKFwiLmJ0bi1wcm9maWxlXCIsIHRoaXMuZWwpLnJlbW92ZUNsYXNzKFwiaGlkZGVuXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkKFwiLmJ0bi1sb2dpblwiLCB0aGlzLmVsKS5yZW1vdmVDbGFzcyhcImhpZGRlblwiKTtcbiAgICAgIHJldHVybiAkKFwiLmJ0bi1wcm9maWxlXCIsIHRoaXMuZWwpLmFkZENsYXNzKFwiaGlkZGVuXCIpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gV2VsY29tZTtcblxufSkoQmFja2JvbmUuVmlldyk7XG4iXX0=
