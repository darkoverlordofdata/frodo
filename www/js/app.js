(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
// Generated by CoffeeScript 1.7.1
var app;

module.exports = app = (function() {
  function app() {}

  return app;

})();

app.models = (function() {
  function models() {}

  return models;

})();

app.views = (function() {
  function views() {}

  return views;

})();

app.controllers = (function() {
  function controllers() {}

  return controllers;

})();

app.lib = (function() {
  function lib() {}

  return lib;

})();

require('./lib/TemplateLoader');

require('./lib/DOMFileSystem');

require('./controllers/Application');

require('./controllers/Router');

require('./models/Person');

require('./models/PersonCollection');

require('./views/Error');

require('./views/Feed');

require('./views/Friends');

require('./views/Login');

require('./views/Person');

require('./views/Post');

require('./views/PostUI');

require('./views/Revoke');

require('./views/Shell');

require('./views/Welcome');

},{"./controllers/Application":2,"./controllers/Router":3,"./lib/DOMFileSystem":5,"./lib/TemplateLoader":6,"./models/Person":8,"./models/PersonCollection":9,"./views/Error":10,"./views/Feed":11,"./views/Friends":12,"./views/Login":13,"./views/Person":14,"./views/Post":15,"./views/PostUI":16,"./views/Revoke":17,"./views/Shell":18,"./views/Welcome":19}],2:[function(require,module,exports){
// Generated by CoffeeScript 1.7.1
var app;

app = require('../app');

app.controllers.Application = (function() {
  function Application() {
    this.user = null;
    this.shell = null;
    this.router = null;
    this.models = {};
    this.views = {};
    this.templateLoader = new app.lib.TemplateLoader();
  }

  return Application;

})();

},{"../app":1}],3:[function(require,module,exports){
// Generated by CoffeeScript 1.7.1
var app, fb,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

app = require('../app');

fb = require('../fb');

app.controllers.Router = (function(_super) {
  __extends(Router, _super);

  function Router() {
    return Router.__super__.constructor.apply(this, arguments);
  }

  Router.prototype.routes = {
    "": "welcome",
    me: "me",
    "me/friends": "myfriends",
    "person/:id": "person",
    "person/:id/friends": "friends",
    "person/:id/mutualfriends": "mutualfriends",
    "person/:id/feed": "feed",
    revoke: "revoke",
    post: "post",
    postui: "postui"
  };

  Router.prototype.initialize = function() {
    return this.welcomeView = new app.views.Welcome({
      model: fb.user
    });
  };

  Router.prototype.welcome = function() {
    return $("#content").html(this.welcomeView.el);
  };

  Router.prototype.me = function() {
    return this.person("me");
  };

  Router.prototype.myfriends = function() {
    return this.friends("me");
  };

  Router.prototype.person = function(id) {
    var e;
    $("#content").html("<div class=\"breadcrumb api\">FB.api(\"/" + id + "\");</div>");
    try {
      return FB.api("/" + id, (function(_this) {
        return function(response) {
          if (response.error) {
            return _this.showErrorPage();
          } else {
            return $("#content").append(new app.views.Person({
              model: new app.models.Person(response)
            }).el);
          }
        };
      })(this));
    } catch (_error) {
      e = _error;
      return this.showErrorPage();
    }
  };

  Router.prototype.friends = function(id) {
    var e;
    $("#content").html("<div class=\"breadcrumb api\">FB.api(\"/" + id + "/friends\");</div>");
    try {
      return FB.api("/" + id + "/friends?limit=20", (function(_this) {
        return function(response) {
          if (response.error) {
            return _this.showErrorPage();
          } else {
            return $("#content").append(new app.views.Friends({
              model: new Backbone.Model(response)
            }).el);
          }
        };
      })(this));
    } catch (_error) {
      e = _error;
      return this.showErrorPage();
    }
  };

  Router.prototype.mutualfriends = function(id) {
    var e;
    $("#content").html("<div class=\"breadcrumb api\">FB.api(\"/" + id + "/mutualfriends\");</div>");
    try {
      return FB.api("/" + id + "/mutualfriends?limit=20", (function(_this) {
        return function(response) {
          if (response.error) {
            return _this.showErrorPage();
          } else {
            return $("#content").append(new app.views.Friends({
              model: new Backbone.Model(response)
            }).el);
          }
        };
      })(this));
    } catch (_error) {
      e = _error;
      return this.showErrorPage();
    }
  };

  Router.prototype.feed = function(id) {
    var e;
    $("#content").html("<div class=\"breadcrumb api\">FB.api(\"/" + id + "/feed\");</div>");
    try {
      return FB.api("/" + id + "/feed?limit=20", (function(_this) {
        return function(response) {
          if (response.error) {
            return _this.showErrorPage();
          } else {
            return $("#content").append(new app.views.Feed({
              model: new Backbone.Model(response)
            }).el);
          }
        };
      })(this));
    } catch (_error) {
      e = _error;
      return this.showErrorPage();
    }
  };

  Router.prototype.post = function() {
    $("#content").html("<div class=\"breadcrumb api\">FB.api(\"/me/feed\", \"post\", data);</div>");
    return $("#content").append(new app.views.Post().el);
  };

  Router.prototype.postui = function() {
    $("#content").html("<div class=\"breadcrumb api\">FB.ui();</div>");
    return $("#content").append(new app.views.PostUI().el);
  };

  Router.prototype.revoke = function() {
    $("#content").html("<div class=\"breadcrumb api\">FB.api(\"/me/permissions\", \"delete\");</div>");
    return $("#content").append(new app.views.Revoke().el);
  };

  Router.prototype.showErrorPage = function() {
    return $("#content").append(new app.views.Error().el);
  };

  return Router;

})(Backbone.Router);

},{"../app":1,"../fb":4}],4:[function(require,module,exports){
// Generated by CoffeeScript 1.7.1
var app, fb;

app = require('./app');

fb = new app.controllers.Application;

module.exports = fb;

},{"./app":1}],5:[function(require,module,exports){
// Generated by CoffeeScript 1.7.1
var app;

app = require('../app');

app.lib.DOMFileSystem = (function() {
  function DOMFileSystem() {}

  DOMFileSystem.prototype.readTemplateFile = function($template) {
    var el;
    if ((el = $('#' + $template)) != null) {
      return el.text();
    } else {
      throw Liquid.FileSystemError("Template not found: " + $template);
    }
  };

  return DOMFileSystem;

})();

Liquid.Template.fileSystem = new app.lib.DOMFileSystem;

},{"../app":1}],6:[function(require,module,exports){
// Generated by CoffeeScript 1.7.1
var app;

app = require('../app');

app.lib.TemplateLoader = (function() {
  function TemplateLoader() {
    this.templates = {};
  }

  TemplateLoader.prototype.load = function(names, callback) {
    var deferreds;
    deferreds = [];
    $.each(names, (function(_this) {
      return function(index, name) {
        if (app.views[name]) {
          return deferreds.push($.get("tpl/" + name.toLowerCase() + ".liquid", function(template) {
            return _this.templates[name] = Liquid.Template.parse(template);
          }));
        } else {
          return alert(name + " not found");
        }
      };
    })(this));
    return $.when.apply(null, deferreds).done(callback);
  };

  TemplateLoader.prototype.get = function(name) {
    return this.templates[name];
  };

  return TemplateLoader;

})();

},{"../app":1}],7:[function(require,module,exports){
// Generated by CoffeeScript 1.7.1
var app, fb;

app = require('./app');

fb = require('./fb');

(function(d) {
  var id, js, ref;
  id = "facebook-jssdk";
  ref = d.getElementsByTagName("script")[0];
  if (d.getElementById(id)) {
    return;
  }
  js = d.createElement("script");
  js.id = id;
  js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js";
  return ref.parentNode.insertBefore(js, ref);
})(document);

window.fbAsyncInit = function() {
  FB.Event.subscribe("auth.statusChange", function(response) {
    return $(document).trigger("fbStatusChange", response);
  });
  return FB.init({
    appId: "1478930342328388",
    channelUrl: "//localhost/channel.html",
    status: true,
    cookie: true,
    xfbml: true
  });
};

$(document).on("ready", function() {
  fb.user = new app.models.Person();
  return fb.templateLoader.load(["Shell", "Welcome", "Login", "Person", "Friends", "Feed", "Post", "PostUI", "Error", "Revoke"], function() {
    fb.shell = new app.views.Shell({
      el: "#shell",
      model: fb.user
    });
    fb.router = new app.controllers.Router();
    return Backbone.history.start();
  });
});

$(document).on("fbStatusChange", function(event, data) {
  if (data.status === "connected") {
    return FB.api("/me", function(response) {
      return fb.user.set(response);
    });
  } else {
    return fb.user.set(fb.user.defaults);
  }
});

$(document).on("logout", function() {
  FB.logout();
  return false;
});

$(document).on("login", function() {
  FB.login((function() {}), {
    scope: "publish_actions"
  });
  return false;
});

},{"./app":1,"./fb":4}],8:[function(require,module,exports){
// Generated by CoffeeScript 1.7.1
var app,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

app = require('../app');

app.models.Person = (function(_super) {
  __extends(Person, _super);

  function Person() {
    return Person.__super__.constructor.apply(this, arguments);
  }

  Person.prototype.defaults = {
    id: "",
    name: "",
    first_name: "",
    last_name: "",
    gender: "",
    username: "",
    link: "",
    locale: "",
    timezone: ""
  };

  return Person;

})(Backbone.Model);

},{"../app":1}],9:[function(require,module,exports){
// Generated by CoffeeScript 1.7.1
var app,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

app = require('../app');

app.models.PersonCollection = (function(_super) {
  __extends(PersonCollection, _super);

  function PersonCollection() {
    return PersonCollection.__super__.constructor.apply(this, arguments);
  }

  PersonCollection.prototype.model = app.models.Person;

  return PersonCollection;

})(Backbone.Collection);

},{"../app":1}],10:[function(require,module,exports){
// Generated by CoffeeScript 1.7.1
var app, fb,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

app = require('../app');

fb = require('../fb');

app.views.Error = (function(_super) {
  __extends(Error, _super);

  function Error() {
    return Error.__super__.constructor.apply(this, arguments);
  }

  Error.prototype.initialize = function() {
    this.template = fb.templateLoader.get("Error");
    return this.render();
  };

  Error.prototype.render = function() {
    this.$el.html(this.template.render());
    return this;
  };

  Error.prototype.events = {
    "click .retry": "retry"
  };

  Error.prototype.retry = function() {
    return Backbone.history.loadUrl(Backbone.history.fragment);
  };

  return Error;

})(Backbone.View);

},{"../app":1,"../fb":4}],11:[function(require,module,exports){
// Generated by CoffeeScript 1.7.1
var app,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

app = require('../app');

app.views.Feed = (function(_super) {
  __extends(Feed, _super);

  function Feed() {
    return Feed.__super__.constructor.apply(this, arguments);
  }

  Feed.prototype.initialize = function() {
    this.template = fb.templateLoader.get("Feed");
    this.model.on("change", this.render, this);
    return this.render();
  };

  Feed.prototype.render = function() {
    this.$el.html(this.template.render(this.model.toJSON()));
    return this;
  };

  Feed.prototype.events = {
    "click .next": "next",
    "click .previous": "previous"
  };

  Feed.prototype.next = function() {
    this.fetch(this.model.get("paging").next);
    return false;
  };

  Feed.prototype.previous = function() {
    this.fetch(this.model.get("paging").previous);
    return false;
  };

  Feed.prototype.fetch = function(url) {
    var self;
    self = this;
    return $.ajax({
      url: url,
      dataType: "json"
    }).done(function(response) {
      return self.model.set(response);
    }).fail(function(e) {
      return alert("Error fetching data");
    });
  };

  return Feed;

})(Backbone.View);

},{"../app":1}],12:[function(require,module,exports){
// Generated by CoffeeScript 1.7.1
var app, fb,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

app = require('../app');

fb = require('../fb');

app.views.Friends = (function(_super) {
  __extends(Friends, _super);

  function Friends() {
    return Friends.__super__.constructor.apply(this, arguments);
  }

  Friends.prototype.initialize = function() {
    this.template = fb.templateLoader.get("Friends");
    this.model.on("change", this.render, this);
    return this.render();
  };

  Friends.prototype.render = function() {
    this.$el.html(this.template.render(this.model.toJSON()));
    return this;
  };

  Friends.prototype.events = {
    "click .next": "next",
    "click .previous": "previous"
  };

  Friends.prototype.next = function() {
    this.fetch(this.model.get("paging").next);
    return false;
  };

  Friends.prototype.previous = function() {
    this.fetch(this.model.get("paging").previous);
    return false;
  };

  Friends.prototype.fetch = function(url) {
    var self;
    self = this;
    return $.ajax({
      url: url,
      dataType: "json"
    }).done(function(response) {
      return self.model.set(response);
    }).fail(function(e) {
      return alert("Error fetching data");
    });
  };

  return Friends;

})(Backbone.View);

},{"../app":1,"../fb":4}],13:[function(require,module,exports){
// Generated by CoffeeScript 1.7.1
var app, fb,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

app = require('../app');

fb = require('../fb');

app.views.Login = (function(_super) {
  __extends(Login, _super);

  function Login() {
    return Login.__super__.constructor.apply(this, arguments);
  }

  Login.prototype.initialize = function() {
    this.template = fb.templateLoader.get("Login");
    this.model.on("change", this.render, this);
    return this.render();
  };

  Login.prototype.render = function() {
    this.$el.html(this.template.render(this.model.toJSON()));
    return this;
  };

  Login.prototype.events = {
    "click .login": "login",
    "click .logout": "logout"
  };

  Login.prototype.login = function(e) {
    $(document).trigger("login");
    return false;
  };

  Login.prototype.logout = function(e) {
    $(document).trigger("logout");
    return false;
  };

  return Login;

})(Backbone.View);

},{"../app":1,"../fb":4}],14:[function(require,module,exports){
// Generated by CoffeeScript 1.7.1
var app, fb,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

app = require('../app');

fb = require('../fb');

app.views.Person = (function(_super) {
  __extends(Person, _super);

  function Person() {
    return Person.__super__.constructor.apply(this, arguments);
  }

  Person.prototype.initialize = function() {
    this.template = fb.templateLoader.get("Person");
    this.model.on("change", this.render, this);
    return this.render();
  };

  Person.prototype.render = function() {
    this.$el.html(this.template.render(this.model.toJSON()));
    return this;
  };

  return Person;

})(Backbone.View);

},{"../app":1,"../fb":4}],15:[function(require,module,exports){
// Generated by CoffeeScript 1.7.1
var app, fb,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

app = require('../app');

fb = require('../fb');

app.views.Post = (function(_super) {
  __extends(Post, _super);

  function Post() {
    return Post.__super__.constructor.apply(this, arguments);
  }

  Post.prototype.initialize = function() {
    this.template = fb.templateLoader.get("Post");
    return this.render();
  };

  Post.prototype.render = function() {
    this.$el.html(this.template.render());
    return this;
  };

  Post.prototype.events = {
    "click .post": "postMessage"
  };

  Post.prototype.postMessage = function() {
    var status;
    status = {
      name: $(".itemName").val(),
      link: $(".link").val(),
      picture: $(".picture").val(),
      caption: $(".caption").val(),
      description: $(".description").val()
    };
    FB.api("/me/feed", "post", status, function(response) {
      if (response && response.id) {
        return alert("Your post was published.");
      } else {
        return alert("Your post was not published.");
      }
    });
    return false;
  };

  return Post;

})(Backbone.View);

},{"../app":1,"../fb":4}],16:[function(require,module,exports){
// Generated by CoffeeScript 1.7.1
var app, fb,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

app = require('../app');

fb = require('../fb');

app.views.PostUI = (function(_super) {
  __extends(PostUI, _super);

  function PostUI() {
    return PostUI.__super__.constructor.apply(this, arguments);
  }

  PostUI.prototype.initialize = function() {
    this.template = fb.templateLoader.get("PostUI");
    return this.render();
  };

  PostUI.prototype.render = function() {
    this.$el.html(this.template.render());
    return this;
  };

  PostUI.prototype.events = {
    "click .post": "postMessage"
  };

  PostUI.prototype.postMessage = function() {
    FB.ui({
      method: "feed",
      name: "Sociogram Application",
      link: "http://coenraets.org/blog/sociogram",
      picture: "http://coenraets.org/sociogram/img/sociogram.jpg",
      caption: "by Christophe Coenraets",
      description: "Sociogram is a simple application that shows how to use the Facebook JavaScript SDK and the Graph API."
    }, function(response) {
      if (response && response.id) {
        return alert("Your post was published.");
      } else {
        return alert("Your post was not published.");
      }
    });
    return false;
  };

  return PostUI;

})(Backbone.View);

},{"../app":1,"../fb":4}],17:[function(require,module,exports){
// Generated by CoffeeScript 1.7.1
var app, fb,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

app = require('../app');

fb = require('../fb');

app.views.Revoke = (function(_super) {
  __extends(Revoke, _super);

  function Revoke() {
    return Revoke.__super__.constructor.apply(this, arguments);
  }

  Revoke.prototype.initialize = function() {
    this.template = fb.templateLoader.get("Revoke");
    return this.render();
  };

  Revoke.prototype.render = function() {
    this.$el.html(this.template.render());
    return this;
  };

  Revoke.prototype.events = {
    "click .revoke": "revoke"
  };

  Revoke.prototype.revoke = function() {
    FB.api("/me/permissions", "delete", function() {
      alert("Permissions revoked");
      return FB.getLoginStatus();
    });
    return false;
  };

  return Revoke;

})(Backbone.View);

},{"../app":1,"../fb":4}],18:[function(require,module,exports){
// Generated by CoffeeScript 1.7.1
var app, fb,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

app = require('../app');

fb = require('../fb');

app.views.Shell = (function(_super) {
  __extends(Shell, _super);

  function Shell() {
    return Shell.__super__.constructor.apply(this, arguments);
  }

  Shell.prototype.initialize = function() {
    this.template = fb.templateLoader.get("Shell");
    return this.render();
  };

  Shell.prototype.render = function() {
    this.$el.html(this.template.render(this.model.toJSON()));
    new app.views.Login({
      model: this.model,
      el: "#login"
    });
    return this;
  };

  Shell.prototype.events = {
    "mousedown li": "mouseDown",
    "mouseup li": "mouseUp",
    "click .btn-login": "login"
  };

  Shell.prototype.mouseDown = function(e) {
    return $(e.currentTarget).addClass("active");
  };

  Shell.prototype.mouseUp = function() {
    return $("li").removeClass("active");
  };

  Shell.prototype.login = function() {
    $(document).trigger("login");
    return false;
  };

  return Shell;

})(Backbone.View);

},{"../app":1,"../fb":4}],19:[function(require,module,exports){
// Generated by CoffeeScript 1.7.1
var app, fb,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

app = require('../app');

fb = require('../fb');

app.views.Welcome = (function(_super) {
  __extends(Welcome, _super);

  function Welcome() {
    return Welcome.__super__.constructor.apply(this, arguments);
  }

  Welcome.prototype.initialize = function() {
    var self;
    self = this;
    this.template = fb.templateLoader.get("Welcome");
    this.model.on("change", this.showHideButtons, this);
    return this.render();
  };

  Welcome.prototype.render = function() {
    this.$el.html(this.template.render());
    this.showHideButtons();
    return this;
  };

  Welcome.prototype.showHideButtons = function() {
    if (this.model.get("id") !== "") {
      $(".btn-login", this.el).addClass("hidden");
      return $(".btn-profile", this.el).removeClass("hidden");
    } else {
      $(".btn-login", this.el).removeClass("hidden");
      return $(".btn-profile", this.el).addClass("hidden");
    }
  };

  return Welcome;

})(Backbone.View);

},{"../app":1,"../fb":4}]},{},[7])
//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlcyI6WyIvaG9tZS9icnVjZS9PcGVuU2hpZnQvZnJvZG8vdG1wL3NvY2lvZ3JhbS9hcHAuanMiLCIvaG9tZS9icnVjZS9PcGVuU2hpZnQvZnJvZG8vdG1wL3NvY2lvZ3JhbS9jb250cm9sbGVycy9BcHBsaWNhdGlvbi5qcyIsIi9ob21lL2JydWNlL09wZW5TaGlmdC9mcm9kby90bXAvc29jaW9ncmFtL2NvbnRyb2xsZXJzL1JvdXRlci5qcyIsIi9ob21lL2JydWNlL09wZW5TaGlmdC9mcm9kby90bXAvc29jaW9ncmFtL2ZiLmpzIiwiL2hvbWUvYnJ1Y2UvT3BlblNoaWZ0L2Zyb2RvL3RtcC9zb2Npb2dyYW0vbGliL0RPTUZpbGVTeXN0ZW0uanMiLCIvaG9tZS9icnVjZS9PcGVuU2hpZnQvZnJvZG8vdG1wL3NvY2lvZ3JhbS9saWIvVGVtcGxhdGVMb2FkZXIuanMiLCIvaG9tZS9icnVjZS9PcGVuU2hpZnQvZnJvZG8vdG1wL3NvY2lvZ3JhbS9tYWluLmpzIiwiL2hvbWUvYnJ1Y2UvT3BlblNoaWZ0L2Zyb2RvL3RtcC9zb2Npb2dyYW0vbW9kZWxzL1BlcnNvbi5qcyIsIi9ob21lL2JydWNlL09wZW5TaGlmdC9mcm9kby90bXAvc29jaW9ncmFtL21vZGVscy9QZXJzb25Db2xsZWN0aW9uLmpzIiwiL2hvbWUvYnJ1Y2UvT3BlblNoaWZ0L2Zyb2RvL3RtcC9zb2Npb2dyYW0vdmlld3MvRXJyb3IuanMiLCIvaG9tZS9icnVjZS9PcGVuU2hpZnQvZnJvZG8vdG1wL3NvY2lvZ3JhbS92aWV3cy9GZWVkLmpzIiwiL2hvbWUvYnJ1Y2UvT3BlblNoaWZ0L2Zyb2RvL3RtcC9zb2Npb2dyYW0vdmlld3MvRnJpZW5kcy5qcyIsIi9ob21lL2JydWNlL09wZW5TaGlmdC9mcm9kby90bXAvc29jaW9ncmFtL3ZpZXdzL0xvZ2luLmpzIiwiL2hvbWUvYnJ1Y2UvT3BlblNoaWZ0L2Zyb2RvL3RtcC9zb2Npb2dyYW0vdmlld3MvUGVyc29uLmpzIiwiL2hvbWUvYnJ1Y2UvT3BlblNoaWZ0L2Zyb2RvL3RtcC9zb2Npb2dyYW0vdmlld3MvUG9zdC5qcyIsIi9ob21lL2JydWNlL09wZW5TaGlmdC9mcm9kby90bXAvc29jaW9ncmFtL3ZpZXdzL1Bvc3RVSS5qcyIsIi9ob21lL2JydWNlL09wZW5TaGlmdC9mcm9kby90bXAvc29jaW9ncmFtL3ZpZXdzL1Jldm9rZS5qcyIsIi9ob21lL2JydWNlL09wZW5TaGlmdC9mcm9kby90bXAvc29jaW9ncmFtL3ZpZXdzL1NoZWxsLmpzIiwiL2hvbWUvYnJ1Y2UvT3BlblNoaWZ0L2Zyb2RvL3RtcC9zb2Npb2dyYW0vdmlld3MvV2VsY29tZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6SkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25EQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDekNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuNy4xXG52YXIgYXBwO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGFwcCA9IChmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gYXBwKCkge31cblxuICByZXR1cm4gYXBwO1xuXG59KSgpO1xuXG5hcHAubW9kZWxzID0gKGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBtb2RlbHMoKSB7fVxuXG4gIHJldHVybiBtb2RlbHM7XG5cbn0pKCk7XG5cbmFwcC52aWV3cyA9IChmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gdmlld3MoKSB7fVxuXG4gIHJldHVybiB2aWV3cztcblxufSkoKTtcblxuYXBwLmNvbnRyb2xsZXJzID0gKGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBjb250cm9sbGVycygpIHt9XG5cbiAgcmV0dXJuIGNvbnRyb2xsZXJzO1xuXG59KSgpO1xuXG5hcHAubGliID0gKGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBsaWIoKSB7fVxuXG4gIHJldHVybiBsaWI7XG5cbn0pKCk7XG5cbnJlcXVpcmUoJy4vbGliL1RlbXBsYXRlTG9hZGVyJyk7XG5cbnJlcXVpcmUoJy4vbGliL0RPTUZpbGVTeXN0ZW0nKTtcblxucmVxdWlyZSgnLi9jb250cm9sbGVycy9BcHBsaWNhdGlvbicpO1xuXG5yZXF1aXJlKCcuL2NvbnRyb2xsZXJzL1JvdXRlcicpO1xuXG5yZXF1aXJlKCcuL21vZGVscy9QZXJzb24nKTtcblxucmVxdWlyZSgnLi9tb2RlbHMvUGVyc29uQ29sbGVjdGlvbicpO1xuXG5yZXF1aXJlKCcuL3ZpZXdzL0Vycm9yJyk7XG5cbnJlcXVpcmUoJy4vdmlld3MvRmVlZCcpO1xuXG5yZXF1aXJlKCcuL3ZpZXdzL0ZyaWVuZHMnKTtcblxucmVxdWlyZSgnLi92aWV3cy9Mb2dpbicpO1xuXG5yZXF1aXJlKCcuL3ZpZXdzL1BlcnNvbicpO1xuXG5yZXF1aXJlKCcuL3ZpZXdzL1Bvc3QnKTtcblxucmVxdWlyZSgnLi92aWV3cy9Qb3N0VUknKTtcblxucmVxdWlyZSgnLi92aWV3cy9SZXZva2UnKTtcblxucmVxdWlyZSgnLi92aWV3cy9TaGVsbCcpO1xuXG5yZXF1aXJlKCcuL3ZpZXdzL1dlbGNvbWUnKTtcbiIsIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS43LjFcbnZhciBhcHA7XG5cbmFwcCA9IHJlcXVpcmUoJy4uL2FwcCcpO1xuXG5hcHAuY29udHJvbGxlcnMuQXBwbGljYXRpb24gPSAoZnVuY3Rpb24oKSB7XG4gIGZ1bmN0aW9uIEFwcGxpY2F0aW9uKCkge1xuICAgIHRoaXMudXNlciA9IG51bGw7XG4gICAgdGhpcy5zaGVsbCA9IG51bGw7XG4gICAgdGhpcy5yb3V0ZXIgPSBudWxsO1xuICAgIHRoaXMubW9kZWxzID0ge307XG4gICAgdGhpcy52aWV3cyA9IHt9O1xuICAgIHRoaXMudGVtcGxhdGVMb2FkZXIgPSBuZXcgYXBwLmxpYi5UZW1wbGF0ZUxvYWRlcigpO1xuICB9XG5cbiAgcmV0dXJuIEFwcGxpY2F0aW9uO1xuXG59KSgpO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjcuMVxudmFyIGFwcCwgZmIsXG4gIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LFxuICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTtcblxuYXBwID0gcmVxdWlyZSgnLi4vYXBwJyk7XG5cbmZiID0gcmVxdWlyZSgnLi4vZmInKTtcblxuYXBwLmNvbnRyb2xsZXJzLlJvdXRlciA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgX19leHRlbmRzKFJvdXRlciwgX3N1cGVyKTtcblxuICBmdW5jdGlvbiBSb3V0ZXIoKSB7XG4gICAgcmV0dXJuIFJvdXRlci5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIFJvdXRlci5wcm90b3R5cGUucm91dGVzID0ge1xuICAgIFwiXCI6IFwid2VsY29tZVwiLFxuICAgIG1lOiBcIm1lXCIsXG4gICAgXCJtZS9mcmllbmRzXCI6IFwibXlmcmllbmRzXCIsXG4gICAgXCJwZXJzb24vOmlkXCI6IFwicGVyc29uXCIsXG4gICAgXCJwZXJzb24vOmlkL2ZyaWVuZHNcIjogXCJmcmllbmRzXCIsXG4gICAgXCJwZXJzb24vOmlkL211dHVhbGZyaWVuZHNcIjogXCJtdXR1YWxmcmllbmRzXCIsXG4gICAgXCJwZXJzb24vOmlkL2ZlZWRcIjogXCJmZWVkXCIsXG4gICAgcmV2b2tlOiBcInJldm9rZVwiLFxuICAgIHBvc3Q6IFwicG9zdFwiLFxuICAgIHBvc3R1aTogXCJwb3N0dWlcIlxuICB9O1xuXG4gIFJvdXRlci5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLndlbGNvbWVWaWV3ID0gbmV3IGFwcC52aWV3cy5XZWxjb21lKHtcbiAgICAgIG1vZGVsOiBmYi51c2VyXG4gICAgfSk7XG4gIH07XG5cbiAgUm91dGVyLnByb3RvdHlwZS53ZWxjb21lID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICQoXCIjY29udGVudFwiKS5odG1sKHRoaXMud2VsY29tZVZpZXcuZWwpO1xuICB9O1xuXG4gIFJvdXRlci5wcm90b3R5cGUubWUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5wZXJzb24oXCJtZVwiKTtcbiAgfTtcblxuICBSb3V0ZXIucHJvdG90eXBlLm15ZnJpZW5kcyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmZyaWVuZHMoXCJtZVwiKTtcbiAgfTtcblxuICBSb3V0ZXIucHJvdG90eXBlLnBlcnNvbiA9IGZ1bmN0aW9uKGlkKSB7XG4gICAgdmFyIGU7XG4gICAgJChcIiNjb250ZW50XCIpLmh0bWwoXCI8ZGl2IGNsYXNzPVxcXCJicmVhZGNydW1iIGFwaVxcXCI+RkIuYXBpKFxcXCIvXCIgKyBpZCArIFwiXFxcIik7PC9kaXY+XCIpO1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gRkIuYXBpKFwiL1wiICsgaWQsIChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICBpZiAocmVzcG9uc2UuZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5zaG93RXJyb3JQYWdlKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiAkKFwiI2NvbnRlbnRcIikuYXBwZW5kKG5ldyBhcHAudmlld3MuUGVyc29uKHtcbiAgICAgICAgICAgICAgbW9kZWw6IG5ldyBhcHAubW9kZWxzLlBlcnNvbihyZXNwb25zZSlcbiAgICAgICAgICAgIH0pLmVsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9KSh0aGlzKSk7XG4gICAgfSBjYXRjaCAoX2Vycm9yKSB7XG4gICAgICBlID0gX2Vycm9yO1xuICAgICAgcmV0dXJuIHRoaXMuc2hvd0Vycm9yUGFnZSgpO1xuICAgIH1cbiAgfTtcblxuICBSb3V0ZXIucHJvdG90eXBlLmZyaWVuZHMgPSBmdW5jdGlvbihpZCkge1xuICAgIHZhciBlO1xuICAgICQoXCIjY29udGVudFwiKS5odG1sKFwiPGRpdiBjbGFzcz1cXFwiYnJlYWRjcnVtYiBhcGlcXFwiPkZCLmFwaShcXFwiL1wiICsgaWQgKyBcIi9mcmllbmRzXFxcIik7PC9kaXY+XCIpO1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gRkIuYXBpKFwiL1wiICsgaWQgKyBcIi9mcmllbmRzP2xpbWl0PTIwXCIsIChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICBpZiAocmVzcG9uc2UuZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5zaG93RXJyb3JQYWdlKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiAkKFwiI2NvbnRlbnRcIikuYXBwZW5kKG5ldyBhcHAudmlld3MuRnJpZW5kcyh7XG4gICAgICAgICAgICAgIG1vZGVsOiBuZXcgQmFja2JvbmUuTW9kZWwocmVzcG9uc2UpXG4gICAgICAgICAgICB9KS5lbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfSkodGhpcykpO1xuICAgIH0gY2F0Y2ggKF9lcnJvcikge1xuICAgICAgZSA9IF9lcnJvcjtcbiAgICAgIHJldHVybiB0aGlzLnNob3dFcnJvclBhZ2UoKTtcbiAgICB9XG4gIH07XG5cbiAgUm91dGVyLnByb3RvdHlwZS5tdXR1YWxmcmllbmRzID0gZnVuY3Rpb24oaWQpIHtcbiAgICB2YXIgZTtcbiAgICAkKFwiI2NvbnRlbnRcIikuaHRtbChcIjxkaXYgY2xhc3M9XFxcImJyZWFkY3J1bWIgYXBpXFxcIj5GQi5hcGkoXFxcIi9cIiArIGlkICsgXCIvbXV0dWFsZnJpZW5kc1xcXCIpOzwvZGl2PlwiKTtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIEZCLmFwaShcIi9cIiArIGlkICsgXCIvbXV0dWFsZnJpZW5kcz9saW1pdD0yMFwiLCAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuc2hvd0Vycm9yUGFnZSgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gJChcIiNjb250ZW50XCIpLmFwcGVuZChuZXcgYXBwLnZpZXdzLkZyaWVuZHMoe1xuICAgICAgICAgICAgICBtb2RlbDogbmV3IEJhY2tib25lLk1vZGVsKHJlc3BvbnNlKVxuICAgICAgICAgICAgfSkuZWwpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpKTtcbiAgICB9IGNhdGNoIChfZXJyb3IpIHtcbiAgICAgIGUgPSBfZXJyb3I7XG4gICAgICByZXR1cm4gdGhpcy5zaG93RXJyb3JQYWdlKCk7XG4gICAgfVxuICB9O1xuXG4gIFJvdXRlci5wcm90b3R5cGUuZmVlZCA9IGZ1bmN0aW9uKGlkKSB7XG4gICAgdmFyIGU7XG4gICAgJChcIiNjb250ZW50XCIpLmh0bWwoXCI8ZGl2IGNsYXNzPVxcXCJicmVhZGNydW1iIGFwaVxcXCI+RkIuYXBpKFxcXCIvXCIgKyBpZCArIFwiL2ZlZWRcXFwiKTs8L2Rpdj5cIik7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBGQi5hcGkoXCIvXCIgKyBpZCArIFwiL2ZlZWQ/bGltaXQ9MjBcIiwgKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgIGlmIChyZXNwb25zZS5lcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnNob3dFcnJvclBhZ2UoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuICQoXCIjY29udGVudFwiKS5hcHBlbmQobmV3IGFwcC52aWV3cy5GZWVkKHtcbiAgICAgICAgICAgICAgbW9kZWw6IG5ldyBCYWNrYm9uZS5Nb2RlbChyZXNwb25zZSlcbiAgICAgICAgICAgIH0pLmVsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9KSh0aGlzKSk7XG4gICAgfSBjYXRjaCAoX2Vycm9yKSB7XG4gICAgICBlID0gX2Vycm9yO1xuICAgICAgcmV0dXJuIHRoaXMuc2hvd0Vycm9yUGFnZSgpO1xuICAgIH1cbiAgfTtcblxuICBSb3V0ZXIucHJvdG90eXBlLnBvc3QgPSBmdW5jdGlvbigpIHtcbiAgICAkKFwiI2NvbnRlbnRcIikuaHRtbChcIjxkaXYgY2xhc3M9XFxcImJyZWFkY3J1bWIgYXBpXFxcIj5GQi5hcGkoXFxcIi9tZS9mZWVkXFxcIiwgXFxcInBvc3RcXFwiLCBkYXRhKTs8L2Rpdj5cIik7XG4gICAgcmV0dXJuICQoXCIjY29udGVudFwiKS5hcHBlbmQobmV3IGFwcC52aWV3cy5Qb3N0KCkuZWwpO1xuICB9O1xuXG4gIFJvdXRlci5wcm90b3R5cGUucG9zdHVpID0gZnVuY3Rpb24oKSB7XG4gICAgJChcIiNjb250ZW50XCIpLmh0bWwoXCI8ZGl2IGNsYXNzPVxcXCJicmVhZGNydW1iIGFwaVxcXCI+RkIudWkoKTs8L2Rpdj5cIik7XG4gICAgcmV0dXJuICQoXCIjY29udGVudFwiKS5hcHBlbmQobmV3IGFwcC52aWV3cy5Qb3N0VUkoKS5lbCk7XG4gIH07XG5cbiAgUm91dGVyLnByb3RvdHlwZS5yZXZva2UgPSBmdW5jdGlvbigpIHtcbiAgICAkKFwiI2NvbnRlbnRcIikuaHRtbChcIjxkaXYgY2xhc3M9XFxcImJyZWFkY3J1bWIgYXBpXFxcIj5GQi5hcGkoXFxcIi9tZS9wZXJtaXNzaW9uc1xcXCIsIFxcXCJkZWxldGVcXFwiKTs8L2Rpdj5cIik7XG4gICAgcmV0dXJuICQoXCIjY29udGVudFwiKS5hcHBlbmQobmV3IGFwcC52aWV3cy5SZXZva2UoKS5lbCk7XG4gIH07XG5cbiAgUm91dGVyLnByb3RvdHlwZS5zaG93RXJyb3JQYWdlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICQoXCIjY29udGVudFwiKS5hcHBlbmQobmV3IGFwcC52aWV3cy5FcnJvcigpLmVsKTtcbiAgfTtcblxuICByZXR1cm4gUm91dGVyO1xuXG59KShCYWNrYm9uZS5Sb3V0ZXIpO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjcuMVxudmFyIGFwcCwgZmI7XG5cbmFwcCA9IHJlcXVpcmUoJy4vYXBwJyk7XG5cbmZiID0gbmV3IGFwcC5jb250cm9sbGVycy5BcHBsaWNhdGlvbjtcblxubW9kdWxlLmV4cG9ydHMgPSBmYjtcbiIsIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS43LjFcbnZhciBhcHA7XG5cbmFwcCA9IHJlcXVpcmUoJy4uL2FwcCcpO1xuXG5hcHAubGliLkRPTUZpbGVTeXN0ZW0gPSAoZnVuY3Rpb24oKSB7XG4gIGZ1bmN0aW9uIERPTUZpbGVTeXN0ZW0oKSB7fVxuXG4gIERPTUZpbGVTeXN0ZW0ucHJvdG90eXBlLnJlYWRUZW1wbGF0ZUZpbGUgPSBmdW5jdGlvbigkdGVtcGxhdGUpIHtcbiAgICB2YXIgZWw7XG4gICAgaWYgKChlbCA9ICQoJyMnICsgJHRlbXBsYXRlKSkgIT0gbnVsbCkge1xuICAgICAgcmV0dXJuIGVsLnRleHQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgTGlxdWlkLkZpbGVTeXN0ZW1FcnJvcihcIlRlbXBsYXRlIG5vdCBmb3VuZDogXCIgKyAkdGVtcGxhdGUpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gRE9NRmlsZVN5c3RlbTtcblxufSkoKTtcblxuTGlxdWlkLlRlbXBsYXRlLmZpbGVTeXN0ZW0gPSBuZXcgYXBwLmxpYi5ET01GaWxlU3lzdGVtO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjcuMVxudmFyIGFwcDtcblxuYXBwID0gcmVxdWlyZSgnLi4vYXBwJyk7XG5cbmFwcC5saWIuVGVtcGxhdGVMb2FkZXIgPSAoZnVuY3Rpb24oKSB7XG4gIGZ1bmN0aW9uIFRlbXBsYXRlTG9hZGVyKCkge1xuICAgIHRoaXMudGVtcGxhdGVzID0ge307XG4gIH1cblxuICBUZW1wbGF0ZUxvYWRlci5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uKG5hbWVzLCBjYWxsYmFjaykge1xuICAgIHZhciBkZWZlcnJlZHM7XG4gICAgZGVmZXJyZWRzID0gW107XG4gICAgJC5lYWNoKG5hbWVzLCAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihpbmRleCwgbmFtZSkge1xuICAgICAgICBpZiAoYXBwLnZpZXdzW25hbWVdKSB7XG4gICAgICAgICAgcmV0dXJuIGRlZmVycmVkcy5wdXNoKCQuZ2V0KFwidHBsL1wiICsgbmFtZS50b0xvd2VyQ2FzZSgpICsgXCIubGlxdWlkXCIsIGZ1bmN0aW9uKHRlbXBsYXRlKSB7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMudGVtcGxhdGVzW25hbWVdID0gTGlxdWlkLlRlbXBsYXRlLnBhcnNlKHRlbXBsYXRlKTtcbiAgICAgICAgICB9KSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIGFsZXJ0KG5hbWUgKyBcIiBub3QgZm91bmRcIik7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSkodGhpcykpO1xuICAgIHJldHVybiAkLndoZW4uYXBwbHkobnVsbCwgZGVmZXJyZWRzKS5kb25lKGNhbGxiYWNrKTtcbiAgfTtcblxuICBUZW1wbGF0ZUxvYWRlci5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24obmFtZSkge1xuICAgIHJldHVybiB0aGlzLnRlbXBsYXRlc1tuYW1lXTtcbiAgfTtcblxuICByZXR1cm4gVGVtcGxhdGVMb2FkZXI7XG5cbn0pKCk7XG4iLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuNy4xXG52YXIgYXBwLCBmYjtcblxuYXBwID0gcmVxdWlyZSgnLi9hcHAnKTtcblxuZmIgPSByZXF1aXJlKCcuL2ZiJyk7XG5cbihmdW5jdGlvbihkKSB7XG4gIHZhciBpZCwganMsIHJlZjtcbiAgaWQgPSBcImZhY2Vib29rLWpzc2RrXCI7XG4gIHJlZiA9IGQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzY3JpcHRcIilbMF07XG4gIGlmIChkLmdldEVsZW1lbnRCeUlkKGlkKSkge1xuICAgIHJldHVybjtcbiAgfVxuICBqcyA9IGQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcbiAganMuaWQgPSBpZDtcbiAganMuYXN5bmMgPSB0cnVlO1xuICBqcy5zcmMgPSBcIi8vY29ubmVjdC5mYWNlYm9vay5uZXQvZW5fVVMvYWxsLmpzXCI7XG4gIHJldHVybiByZWYucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoanMsIHJlZik7XG59KShkb2N1bWVudCk7XG5cbndpbmRvdy5mYkFzeW5jSW5pdCA9IGZ1bmN0aW9uKCkge1xuICBGQi5FdmVudC5zdWJzY3JpYmUoXCJhdXRoLnN0YXR1c0NoYW5nZVwiLCBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgIHJldHVybiAkKGRvY3VtZW50KS50cmlnZ2VyKFwiZmJTdGF0dXNDaGFuZ2VcIiwgcmVzcG9uc2UpO1xuICB9KTtcbiAgcmV0dXJuIEZCLmluaXQoe1xuICAgIGFwcElkOiBcIjE0Nzg5MzAzNDIzMjgzODhcIixcbiAgICBjaGFubmVsVXJsOiBcIi8vbG9jYWxob3N0L2NoYW5uZWwuaHRtbFwiLFxuICAgIHN0YXR1czogdHJ1ZSxcbiAgICBjb29raWU6IHRydWUsXG4gICAgeGZibWw6IHRydWVcbiAgfSk7XG59O1xuXG4kKGRvY3VtZW50KS5vbihcInJlYWR5XCIsIGZ1bmN0aW9uKCkge1xuICBmYi51c2VyID0gbmV3IGFwcC5tb2RlbHMuUGVyc29uKCk7XG4gIHJldHVybiBmYi50ZW1wbGF0ZUxvYWRlci5sb2FkKFtcIlNoZWxsXCIsIFwiV2VsY29tZVwiLCBcIkxvZ2luXCIsIFwiUGVyc29uXCIsIFwiRnJpZW5kc1wiLCBcIkZlZWRcIiwgXCJQb3N0XCIsIFwiUG9zdFVJXCIsIFwiRXJyb3JcIiwgXCJSZXZva2VcIl0sIGZ1bmN0aW9uKCkge1xuICAgIGZiLnNoZWxsID0gbmV3IGFwcC52aWV3cy5TaGVsbCh7XG4gICAgICBlbDogXCIjc2hlbGxcIixcbiAgICAgIG1vZGVsOiBmYi51c2VyXG4gICAgfSk7XG4gICAgZmIucm91dGVyID0gbmV3IGFwcC5jb250cm9sbGVycy5Sb3V0ZXIoKTtcbiAgICByZXR1cm4gQmFja2JvbmUuaGlzdG9yeS5zdGFydCgpO1xuICB9KTtcbn0pO1xuXG4kKGRvY3VtZW50KS5vbihcImZiU3RhdHVzQ2hhbmdlXCIsIGZ1bmN0aW9uKGV2ZW50LCBkYXRhKSB7XG4gIGlmIChkYXRhLnN0YXR1cyA9PT0gXCJjb25uZWN0ZWRcIikge1xuICAgIHJldHVybiBGQi5hcGkoXCIvbWVcIiwgZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgIHJldHVybiBmYi51c2VyLnNldChyZXNwb25zZSk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGZiLnVzZXIuc2V0KGZiLnVzZXIuZGVmYXVsdHMpO1xuICB9XG59KTtcblxuJChkb2N1bWVudCkub24oXCJsb2dvdXRcIiwgZnVuY3Rpb24oKSB7XG4gIEZCLmxvZ291dCgpO1xuICByZXR1cm4gZmFsc2U7XG59KTtcblxuJChkb2N1bWVudCkub24oXCJsb2dpblwiLCBmdW5jdGlvbigpIHtcbiAgRkIubG9naW4oKGZ1bmN0aW9uKCkge30pLCB7XG4gICAgc2NvcGU6IFwicHVibGlzaF9hY3Rpb25zXCJcbiAgfSk7XG4gIHJldHVybiBmYWxzZTtcbn0pO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjcuMVxudmFyIGFwcCxcbiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksXG4gIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9O1xuXG5hcHAgPSByZXF1aXJlKCcuLi9hcHAnKTtcblxuYXBwLm1vZGVscy5QZXJzb24gPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gIF9fZXh0ZW5kcyhQZXJzb24sIF9zdXBlcik7XG5cbiAgZnVuY3Rpb24gUGVyc29uKCkge1xuICAgIHJldHVybiBQZXJzb24uX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBQZXJzb24ucHJvdG90eXBlLmRlZmF1bHRzID0ge1xuICAgIGlkOiBcIlwiLFxuICAgIG5hbWU6IFwiXCIsXG4gICAgZmlyc3RfbmFtZTogXCJcIixcbiAgICBsYXN0X25hbWU6IFwiXCIsXG4gICAgZ2VuZGVyOiBcIlwiLFxuICAgIHVzZXJuYW1lOiBcIlwiLFxuICAgIGxpbms6IFwiXCIsXG4gICAgbG9jYWxlOiBcIlwiLFxuICAgIHRpbWV6b25lOiBcIlwiXG4gIH07XG5cbiAgcmV0dXJuIFBlcnNvbjtcblxufSkoQmFja2JvbmUuTW9kZWwpO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjcuMVxudmFyIGFwcCxcbiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksXG4gIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9O1xuXG5hcHAgPSByZXF1aXJlKCcuLi9hcHAnKTtcblxuYXBwLm1vZGVscy5QZXJzb25Db2xsZWN0aW9uID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICBfX2V4dGVuZHMoUGVyc29uQ29sbGVjdGlvbiwgX3N1cGVyKTtcblxuICBmdW5jdGlvbiBQZXJzb25Db2xsZWN0aW9uKCkge1xuICAgIHJldHVybiBQZXJzb25Db2xsZWN0aW9uLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgUGVyc29uQ29sbGVjdGlvbi5wcm90b3R5cGUubW9kZWwgPSBhcHAubW9kZWxzLlBlcnNvbjtcblxuICByZXR1cm4gUGVyc29uQ29sbGVjdGlvbjtcblxufSkoQmFja2JvbmUuQ29sbGVjdGlvbik7XG4iLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuNy4xXG52YXIgYXBwLCBmYixcbiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksXG4gIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9O1xuXG5hcHAgPSByZXF1aXJlKCcuLi9hcHAnKTtcblxuZmIgPSByZXF1aXJlKCcuLi9mYicpO1xuXG5hcHAudmlld3MuRXJyb3IgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gIF9fZXh0ZW5kcyhFcnJvciwgX3N1cGVyKTtcblxuICBmdW5jdGlvbiBFcnJvcigpIHtcbiAgICByZXR1cm4gRXJyb3IuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBFcnJvci5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMudGVtcGxhdGUgPSBmYi50ZW1wbGF0ZUxvYWRlci5nZXQoXCJFcnJvclwiKTtcbiAgICByZXR1cm4gdGhpcy5yZW5kZXIoKTtcbiAgfTtcblxuICBFcnJvci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy4kZWwuaHRtbCh0aGlzLnRlbXBsYXRlLnJlbmRlcigpKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBFcnJvci5wcm90b3R5cGUuZXZlbnRzID0ge1xuICAgIFwiY2xpY2sgLnJldHJ5XCI6IFwicmV0cnlcIlxuICB9O1xuXG4gIEVycm9yLnByb3RvdHlwZS5yZXRyeSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBCYWNrYm9uZS5oaXN0b3J5LmxvYWRVcmwoQmFja2JvbmUuaGlzdG9yeS5mcmFnbWVudCk7XG4gIH07XG5cbiAgcmV0dXJuIEVycm9yO1xuXG59KShCYWNrYm9uZS5WaWV3KTtcbiIsIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS43LjFcbnZhciBhcHAsXG4gIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LFxuICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTtcblxuYXBwID0gcmVxdWlyZSgnLi4vYXBwJyk7XG5cbmFwcC52aWV3cy5GZWVkID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICBfX2V4dGVuZHMoRmVlZCwgX3N1cGVyKTtcblxuICBmdW5jdGlvbiBGZWVkKCkge1xuICAgIHJldHVybiBGZWVkLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgRmVlZC5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMudGVtcGxhdGUgPSBmYi50ZW1wbGF0ZUxvYWRlci5nZXQoXCJGZWVkXCIpO1xuICAgIHRoaXMubW9kZWwub24oXCJjaGFuZ2VcIiwgdGhpcy5yZW5kZXIsIHRoaXMpO1xuICAgIHJldHVybiB0aGlzLnJlbmRlcigpO1xuICB9O1xuXG4gIEZlZWQucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuJGVsLmh0bWwodGhpcy50ZW1wbGF0ZS5yZW5kZXIodGhpcy5tb2RlbC50b0pTT04oKSkpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIEZlZWQucHJvdG90eXBlLmV2ZW50cyA9IHtcbiAgICBcImNsaWNrIC5uZXh0XCI6IFwibmV4dFwiLFxuICAgIFwiY2xpY2sgLnByZXZpb3VzXCI6IFwicHJldmlvdXNcIlxuICB9O1xuXG4gIEZlZWQucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmZldGNoKHRoaXMubW9kZWwuZ2V0KFwicGFnaW5nXCIpLm5leHQpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICBGZWVkLnByb3RvdHlwZS5wcmV2aW91cyA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuZmV0Y2godGhpcy5tb2RlbC5nZXQoXCJwYWdpbmdcIikucHJldmlvdXMpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICBGZWVkLnByb3RvdHlwZS5mZXRjaCA9IGZ1bmN0aW9uKHVybCkge1xuICAgIHZhciBzZWxmO1xuICAgIHNlbGYgPSB0aGlzO1xuICAgIHJldHVybiAkLmFqYXgoe1xuICAgICAgdXJsOiB1cmwsXG4gICAgICBkYXRhVHlwZTogXCJqc29uXCJcbiAgICB9KS5kb25lKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICByZXR1cm4gc2VsZi5tb2RlbC5zZXQocmVzcG9uc2UpO1xuICAgIH0pLmZhaWwoZnVuY3Rpb24oZSkge1xuICAgICAgcmV0dXJuIGFsZXJ0KFwiRXJyb3IgZmV0Y2hpbmcgZGF0YVwiKTtcbiAgICB9KTtcbiAgfTtcblxuICByZXR1cm4gRmVlZDtcblxufSkoQmFja2JvbmUuVmlldyk7XG4iLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuNy4xXG52YXIgYXBwLCBmYixcbiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksXG4gIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9O1xuXG5hcHAgPSByZXF1aXJlKCcuLi9hcHAnKTtcblxuZmIgPSByZXF1aXJlKCcuLi9mYicpO1xuXG5hcHAudmlld3MuRnJpZW5kcyA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgX19leHRlbmRzKEZyaWVuZHMsIF9zdXBlcik7XG5cbiAgZnVuY3Rpb24gRnJpZW5kcygpIHtcbiAgICByZXR1cm4gRnJpZW5kcy5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIEZyaWVuZHMucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnRlbXBsYXRlID0gZmIudGVtcGxhdGVMb2FkZXIuZ2V0KFwiRnJpZW5kc1wiKTtcbiAgICB0aGlzLm1vZGVsLm9uKFwiY2hhbmdlXCIsIHRoaXMucmVuZGVyLCB0aGlzKTtcbiAgICByZXR1cm4gdGhpcy5yZW5kZXIoKTtcbiAgfTtcblxuICBGcmllbmRzLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLiRlbC5odG1sKHRoaXMudGVtcGxhdGUucmVuZGVyKHRoaXMubW9kZWwudG9KU09OKCkpKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBGcmllbmRzLnByb3RvdHlwZS5ldmVudHMgPSB7XG4gICAgXCJjbGljayAubmV4dFwiOiBcIm5leHRcIixcbiAgICBcImNsaWNrIC5wcmV2aW91c1wiOiBcInByZXZpb3VzXCJcbiAgfTtcblxuICBGcmllbmRzLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5mZXRjaCh0aGlzLm1vZGVsLmdldChcInBhZ2luZ1wiKS5uZXh0KTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgRnJpZW5kcy5wcm90b3R5cGUucHJldmlvdXMgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmZldGNoKHRoaXMubW9kZWwuZ2V0KFwicGFnaW5nXCIpLnByZXZpb3VzKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgRnJpZW5kcy5wcm90b3R5cGUuZmV0Y2ggPSBmdW5jdGlvbih1cmwpIHtcbiAgICB2YXIgc2VsZjtcbiAgICBzZWxmID0gdGhpcztcbiAgICByZXR1cm4gJC5hamF4KHtcbiAgICAgIHVybDogdXJsLFxuICAgICAgZGF0YVR5cGU6IFwianNvblwiXG4gICAgfSkuZG9uZShmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgcmV0dXJuIHNlbGYubW9kZWwuc2V0KHJlc3BvbnNlKTtcbiAgICB9KS5mYWlsKGZ1bmN0aW9uKGUpIHtcbiAgICAgIHJldHVybiBhbGVydChcIkVycm9yIGZldGNoaW5nIGRhdGFcIik7XG4gICAgfSk7XG4gIH07XG5cbiAgcmV0dXJuIEZyaWVuZHM7XG5cbn0pKEJhY2tib25lLlZpZXcpO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjcuMVxudmFyIGFwcCwgZmIsXG4gIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LFxuICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTtcblxuYXBwID0gcmVxdWlyZSgnLi4vYXBwJyk7XG5cbmZiID0gcmVxdWlyZSgnLi4vZmInKTtcblxuYXBwLnZpZXdzLkxvZ2luID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICBfX2V4dGVuZHMoTG9naW4sIF9zdXBlcik7XG5cbiAgZnVuY3Rpb24gTG9naW4oKSB7XG4gICAgcmV0dXJuIExvZ2luLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgTG9naW4ucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnRlbXBsYXRlID0gZmIudGVtcGxhdGVMb2FkZXIuZ2V0KFwiTG9naW5cIik7XG4gICAgdGhpcy5tb2RlbC5vbihcImNoYW5nZVwiLCB0aGlzLnJlbmRlciwgdGhpcyk7XG4gICAgcmV0dXJuIHRoaXMucmVuZGVyKCk7XG4gIH07XG5cbiAgTG9naW4ucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuJGVsLmh0bWwodGhpcy50ZW1wbGF0ZS5yZW5kZXIodGhpcy5tb2RlbC50b0pTT04oKSkpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIExvZ2luLnByb3RvdHlwZS5ldmVudHMgPSB7XG4gICAgXCJjbGljayAubG9naW5cIjogXCJsb2dpblwiLFxuICAgIFwiY2xpY2sgLmxvZ291dFwiOiBcImxvZ291dFwiXG4gIH07XG5cbiAgTG9naW4ucHJvdG90eXBlLmxvZ2luID0gZnVuY3Rpb24oZSkge1xuICAgICQoZG9jdW1lbnQpLnRyaWdnZXIoXCJsb2dpblwiKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgTG9naW4ucHJvdG90eXBlLmxvZ291dCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAkKGRvY3VtZW50KS50cmlnZ2VyKFwibG9nb3V0XCIpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICByZXR1cm4gTG9naW47XG5cbn0pKEJhY2tib25lLlZpZXcpO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjcuMVxudmFyIGFwcCwgZmIsXG4gIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LFxuICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTtcblxuYXBwID0gcmVxdWlyZSgnLi4vYXBwJyk7XG5cbmZiID0gcmVxdWlyZSgnLi4vZmInKTtcblxuYXBwLnZpZXdzLlBlcnNvbiA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgX19leHRlbmRzKFBlcnNvbiwgX3N1cGVyKTtcblxuICBmdW5jdGlvbiBQZXJzb24oKSB7XG4gICAgcmV0dXJuIFBlcnNvbi5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIFBlcnNvbi5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMudGVtcGxhdGUgPSBmYi50ZW1wbGF0ZUxvYWRlci5nZXQoXCJQZXJzb25cIik7XG4gICAgdGhpcy5tb2RlbC5vbihcImNoYW5nZVwiLCB0aGlzLnJlbmRlciwgdGhpcyk7XG4gICAgcmV0dXJuIHRoaXMucmVuZGVyKCk7XG4gIH07XG5cbiAgUGVyc29uLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLiRlbC5odG1sKHRoaXMudGVtcGxhdGUucmVuZGVyKHRoaXMubW9kZWwudG9KU09OKCkpKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICByZXR1cm4gUGVyc29uO1xuXG59KShCYWNrYm9uZS5WaWV3KTtcbiIsIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS43LjFcbnZhciBhcHAsIGZiLFxuICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSxcbiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07XG5cbmFwcCA9IHJlcXVpcmUoJy4uL2FwcCcpO1xuXG5mYiA9IHJlcXVpcmUoJy4uL2ZiJyk7XG5cbmFwcC52aWV3cy5Qb3N0ID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICBfX2V4dGVuZHMoUG9zdCwgX3N1cGVyKTtcblxuICBmdW5jdGlvbiBQb3N0KCkge1xuICAgIHJldHVybiBQb3N0Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgUG9zdC5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMudGVtcGxhdGUgPSBmYi50ZW1wbGF0ZUxvYWRlci5nZXQoXCJQb3N0XCIpO1xuICAgIHJldHVybiB0aGlzLnJlbmRlcigpO1xuICB9O1xuXG4gIFBvc3QucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuJGVsLmh0bWwodGhpcy50ZW1wbGF0ZS5yZW5kZXIoKSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgUG9zdC5wcm90b3R5cGUuZXZlbnRzID0ge1xuICAgIFwiY2xpY2sgLnBvc3RcIjogXCJwb3N0TWVzc2FnZVwiXG4gIH07XG5cbiAgUG9zdC5wcm90b3R5cGUucG9zdE1lc3NhZ2UgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgc3RhdHVzO1xuICAgIHN0YXR1cyA9IHtcbiAgICAgIG5hbWU6ICQoXCIuaXRlbU5hbWVcIikudmFsKCksXG4gICAgICBsaW5rOiAkKFwiLmxpbmtcIikudmFsKCksXG4gICAgICBwaWN0dXJlOiAkKFwiLnBpY3R1cmVcIikudmFsKCksXG4gICAgICBjYXB0aW9uOiAkKFwiLmNhcHRpb25cIikudmFsKCksXG4gICAgICBkZXNjcmlwdGlvbjogJChcIi5kZXNjcmlwdGlvblwiKS52YWwoKVxuICAgIH07XG4gICAgRkIuYXBpKFwiL21lL2ZlZWRcIiwgXCJwb3N0XCIsIHN0YXR1cywgZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5pZCkge1xuICAgICAgICByZXR1cm4gYWxlcnQoXCJZb3VyIHBvc3Qgd2FzIHB1Ymxpc2hlZC5cIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gYWxlcnQoXCJZb3VyIHBvc3Qgd2FzIG5vdCBwdWJsaXNoZWQuXCIpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICByZXR1cm4gUG9zdDtcblxufSkoQmFja2JvbmUuVmlldyk7XG4iLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuNy4xXG52YXIgYXBwLCBmYixcbiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksXG4gIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9O1xuXG5hcHAgPSByZXF1aXJlKCcuLi9hcHAnKTtcblxuZmIgPSByZXF1aXJlKCcuLi9mYicpO1xuXG5hcHAudmlld3MuUG9zdFVJID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICBfX2V4dGVuZHMoUG9zdFVJLCBfc3VwZXIpO1xuXG4gIGZ1bmN0aW9uIFBvc3RVSSgpIHtcbiAgICByZXR1cm4gUG9zdFVJLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgUG9zdFVJLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy50ZW1wbGF0ZSA9IGZiLnRlbXBsYXRlTG9hZGVyLmdldChcIlBvc3RVSVwiKTtcbiAgICByZXR1cm4gdGhpcy5yZW5kZXIoKTtcbiAgfTtcblxuICBQb3N0VUkucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuJGVsLmh0bWwodGhpcy50ZW1wbGF0ZS5yZW5kZXIoKSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgUG9zdFVJLnByb3RvdHlwZS5ldmVudHMgPSB7XG4gICAgXCJjbGljayAucG9zdFwiOiBcInBvc3RNZXNzYWdlXCJcbiAgfTtcblxuICBQb3N0VUkucHJvdG90eXBlLnBvc3RNZXNzYWdlID0gZnVuY3Rpb24oKSB7XG4gICAgRkIudWkoe1xuICAgICAgbWV0aG9kOiBcImZlZWRcIixcbiAgICAgIG5hbWU6IFwiU29jaW9ncmFtIEFwcGxpY2F0aW9uXCIsXG4gICAgICBsaW5rOiBcImh0dHA6Ly9jb2VucmFldHMub3JnL2Jsb2cvc29jaW9ncmFtXCIsXG4gICAgICBwaWN0dXJlOiBcImh0dHA6Ly9jb2VucmFldHMub3JnL3NvY2lvZ3JhbS9pbWcvc29jaW9ncmFtLmpwZ1wiLFxuICAgICAgY2FwdGlvbjogXCJieSBDaHJpc3RvcGhlIENvZW5yYWV0c1wiLFxuICAgICAgZGVzY3JpcHRpb246IFwiU29jaW9ncmFtIGlzIGEgc2ltcGxlIGFwcGxpY2F0aW9uIHRoYXQgc2hvd3MgaG93IHRvIHVzZSB0aGUgRmFjZWJvb2sgSmF2YVNjcmlwdCBTREsgYW5kIHRoZSBHcmFwaCBBUEkuXCJcbiAgICB9LCBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLmlkKSB7XG4gICAgICAgIHJldHVybiBhbGVydChcIllvdXIgcG9zdCB3YXMgcHVibGlzaGVkLlwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBhbGVydChcIllvdXIgcG9zdCB3YXMgbm90IHB1Ymxpc2hlZC5cIik7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIHJldHVybiBQb3N0VUk7XG5cbn0pKEJhY2tib25lLlZpZXcpO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjcuMVxudmFyIGFwcCwgZmIsXG4gIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LFxuICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTtcblxuYXBwID0gcmVxdWlyZSgnLi4vYXBwJyk7XG5cbmZiID0gcmVxdWlyZSgnLi4vZmInKTtcblxuYXBwLnZpZXdzLlJldm9rZSA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgX19leHRlbmRzKFJldm9rZSwgX3N1cGVyKTtcblxuICBmdW5jdGlvbiBSZXZva2UoKSB7XG4gICAgcmV0dXJuIFJldm9rZS5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIFJldm9rZS5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMudGVtcGxhdGUgPSBmYi50ZW1wbGF0ZUxvYWRlci5nZXQoXCJSZXZva2VcIik7XG4gICAgcmV0dXJuIHRoaXMucmVuZGVyKCk7XG4gIH07XG5cbiAgUmV2b2tlLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLiRlbC5odG1sKHRoaXMudGVtcGxhdGUucmVuZGVyKCkpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIFJldm9rZS5wcm90b3R5cGUuZXZlbnRzID0ge1xuICAgIFwiY2xpY2sgLnJldm9rZVwiOiBcInJldm9rZVwiXG4gIH07XG5cbiAgUmV2b2tlLnByb3RvdHlwZS5yZXZva2UgPSBmdW5jdGlvbigpIHtcbiAgICBGQi5hcGkoXCIvbWUvcGVybWlzc2lvbnNcIiwgXCJkZWxldGVcIiwgZnVuY3Rpb24oKSB7XG4gICAgICBhbGVydChcIlBlcm1pc3Npb25zIHJldm9rZWRcIik7XG4gICAgICByZXR1cm4gRkIuZ2V0TG9naW5TdGF0dXMoKTtcbiAgICB9KTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgcmV0dXJuIFJldm9rZTtcblxufSkoQmFja2JvbmUuVmlldyk7XG4iLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuNy4xXG52YXIgYXBwLCBmYixcbiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksXG4gIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9O1xuXG5hcHAgPSByZXF1aXJlKCcuLi9hcHAnKTtcblxuZmIgPSByZXF1aXJlKCcuLi9mYicpO1xuXG5hcHAudmlld3MuU2hlbGwgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gIF9fZXh0ZW5kcyhTaGVsbCwgX3N1cGVyKTtcblxuICBmdW5jdGlvbiBTaGVsbCgpIHtcbiAgICByZXR1cm4gU2hlbGwuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBTaGVsbC5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMudGVtcGxhdGUgPSBmYi50ZW1wbGF0ZUxvYWRlci5nZXQoXCJTaGVsbFwiKTtcbiAgICByZXR1cm4gdGhpcy5yZW5kZXIoKTtcbiAgfTtcblxuICBTaGVsbC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy4kZWwuaHRtbCh0aGlzLnRlbXBsYXRlLnJlbmRlcih0aGlzLm1vZGVsLnRvSlNPTigpKSk7XG4gICAgbmV3IGFwcC52aWV3cy5Mb2dpbih7XG4gICAgICBtb2RlbDogdGhpcy5tb2RlbCxcbiAgICAgIGVsOiBcIiNsb2dpblwiXG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgU2hlbGwucHJvdG90eXBlLmV2ZW50cyA9IHtcbiAgICBcIm1vdXNlZG93biBsaVwiOiBcIm1vdXNlRG93blwiLFxuICAgIFwibW91c2V1cCBsaVwiOiBcIm1vdXNlVXBcIixcbiAgICBcImNsaWNrIC5idG4tbG9naW5cIjogXCJsb2dpblwiXG4gIH07XG5cbiAgU2hlbGwucHJvdG90eXBlLm1vdXNlRG93biA9IGZ1bmN0aW9uKGUpIHtcbiAgICByZXR1cm4gJChlLmN1cnJlbnRUYXJnZXQpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xuICB9O1xuXG4gIFNoZWxsLnByb3RvdHlwZS5tb3VzZVVwID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICQoXCJsaVwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcbiAgfTtcblxuICBTaGVsbC5wcm90b3R5cGUubG9naW4gPSBmdW5jdGlvbigpIHtcbiAgICAkKGRvY3VtZW50KS50cmlnZ2VyKFwibG9naW5cIik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIHJldHVybiBTaGVsbDtcblxufSkoQmFja2JvbmUuVmlldyk7XG4iLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuNy4xXG52YXIgYXBwLCBmYixcbiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksXG4gIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9O1xuXG5hcHAgPSByZXF1aXJlKCcuLi9hcHAnKTtcblxuZmIgPSByZXF1aXJlKCcuLi9mYicpO1xuXG5hcHAudmlld3MuV2VsY29tZSA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgX19leHRlbmRzKFdlbGNvbWUsIF9zdXBlcik7XG5cbiAgZnVuY3Rpb24gV2VsY29tZSgpIHtcbiAgICByZXR1cm4gV2VsY29tZS5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIFdlbGNvbWUucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgc2VsZjtcbiAgICBzZWxmID0gdGhpcztcbiAgICB0aGlzLnRlbXBsYXRlID0gZmIudGVtcGxhdGVMb2FkZXIuZ2V0KFwiV2VsY29tZVwiKTtcbiAgICB0aGlzLm1vZGVsLm9uKFwiY2hhbmdlXCIsIHRoaXMuc2hvd0hpZGVCdXR0b25zLCB0aGlzKTtcbiAgICByZXR1cm4gdGhpcy5yZW5kZXIoKTtcbiAgfTtcblxuICBXZWxjb21lLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLiRlbC5odG1sKHRoaXMudGVtcGxhdGUucmVuZGVyKCkpO1xuICAgIHRoaXMuc2hvd0hpZGVCdXR0b25zKCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgV2VsY29tZS5wcm90b3R5cGUuc2hvd0hpZGVCdXR0b25zID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMubW9kZWwuZ2V0KFwiaWRcIikgIT09IFwiXCIpIHtcbiAgICAgICQoXCIuYnRuLWxvZ2luXCIsIHRoaXMuZWwpLmFkZENsYXNzKFwiaGlkZGVuXCIpO1xuICAgICAgcmV0dXJuICQoXCIuYnRuLXByb2ZpbGVcIiwgdGhpcy5lbCkucmVtb3ZlQ2xhc3MoXCJoaWRkZW5cIik7XG4gICAgfSBlbHNlIHtcbiAgICAgICQoXCIuYnRuLWxvZ2luXCIsIHRoaXMuZWwpLnJlbW92ZUNsYXNzKFwiaGlkZGVuXCIpO1xuICAgICAgcmV0dXJuICQoXCIuYnRuLXByb2ZpbGVcIiwgdGhpcy5lbCkuYWRkQ2xhc3MoXCJoaWRkZW5cIik7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBXZWxjb21lO1xuXG59KShCYWNrYm9uZS5WaWV3KTtcbiJdfQ==
